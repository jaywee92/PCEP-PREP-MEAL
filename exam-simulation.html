<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCEP-PREP-MEAL - Exam Simulation</title>
    <style>
        :root {
            --primary-light: #0a84ff;
            --module1: #6366f1;
            --module2: #ec4899;
            --module3: #f59e0b;
            --module4: #10b981;
            --dark-bg: #0f172a;
            --dark-surface: #1e293b;
            --dark-surface-light: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --border-color: #475569;
            --success: #22c55e;
            --error: #ef4444;
            --warning: #f59e0b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Utility Classes */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--module1), var(--module2), var(--module3), var(--module4));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--module1), var(--module2));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(99, 102, 241, 0.3);
        }

        .btn-secondary {
            background: var(--dark-surface-light);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            border-color: var(--primary-light);
            background: var(--dark-surface);
        }

        .btn-lg {
            padding: 1.25rem 2.5rem;
            font-size: 1.125rem;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Screens */
        .screen {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Setup Screen */
        .setup-screen {
            max-width: 800px;
            margin: 0 auto;
        }

        .setup-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .setup-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--module1), var(--module2), var(--module3), var(--module4));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .setup-header p {
            color: var(--text-secondary);
            font-size: 1.125rem;
        }

        .setup-section {
            background: var(--dark-surface);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }

        .setup-section:hover {
            border-color: var(--primary-light);
            background: var(--dark-surface-light);
        }

        .setup-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .setup-section h2 span {
            background: linear-gradient(135deg, var(--module1), var(--module2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: var(--dark-bg);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            border-color: var(--primary-light);
            background: var(--dark-surface);
        }

        .checkbox-item input[type="checkbox"] {
            width: 1.25rem;
            height: 1.25rem;
            cursor: pointer;
            margin-right: 0.75rem;
            accent-color: var(--primary-light);
        }

        .checkbox-item label {
            cursor: pointer;
            flex: 1;
            font-weight: 500;
        }

        .min-modules-warning {
            color: var(--warning);
            font-size: 0.875rem;
            margin-top: 0.5rem;
            display: none;
        }

        .min-modules-warning.show {
            display: block;
        }

        .slider-container {
            margin-bottom: 1.5rem;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .slider-value {
            background: linear-gradient(135deg, var(--module1), var(--module2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            font-size: 1.125rem;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: var(--dark-bg);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--module1), var(--module2));
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.4);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--module1), var(--module2));
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.4);
        }

        .timer-checkbox {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .timer-checkbox input {
            width: 1.5rem;
            height: 1.5rem;
            cursor: pointer;
            accent-color: var(--primary-light);
            margin-right: 1rem;
        }

        .timer-checkbox label {
            cursor: pointer;
            font-weight: 500;
        }

        .timer-info {
            background: var(--dark-bg);
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            border-left: 4px solid var(--module3);
            color: var(--text-secondary);
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .radio-item {
            display: flex;
            align-items: flex-start;
            cursor: pointer;
        }

        .radio-item input[type="radio"] {
            width: 1.5rem;
            height: 1.5rem;
            cursor: pointer;
            accent-color: var(--primary-light);
            margin-right: 1rem;
            margin-top: 0.25rem;
            flex-shrink: 0;
        }

        .radio-item-content {
            flex: 1;
        }

        .radio-item-content label {
            display: block;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 0.25rem;
        }

        .radio-item-content p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .setup-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .setup-actions .btn-primary {
            flex: 1;
        }

        /* Exam Screen */
        .exam-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid var(--border-color);
            flex-wrap: wrap;
            gap: 1rem;
        }

        .exam-progress {
            font-size: 1.125rem;
            font-weight: 600;
        }

        .exam-progress .progress-value {
            background: linear-gradient(135deg, var(--module1), var(--module2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .exam-timer {
            font-size: 1.5rem;
            font-weight: 700;
            min-width: 120px;
            text-align: center;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            background: var(--dark-surface);
            border: 2px solid var(--border-color);
        }

        .exam-timer.warning {
            border-color: var(--warning);
            background: rgba(245, 158, 11, 0.1);
        }

        .exam-timer.critical {
            border-color: var(--error);
            background: rgba(239, 68, 68, 0.1);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .exam-back {
            padding: 0.75rem 1.5rem;
        }

        .exam-content {
            display: grid;
            grid-template-columns: 1fr 250px;
            gap: 2rem;
        }

        @media (max-width: 1024px) {
            .exam-content {
                grid-template-columns: 1fr;
            }
        }

        .question-container {
            background: var(--dark-surface);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
        }

        .question-number {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .question-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .code-block {
            background: var(--dark-bg);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            overflow-x: auto;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #e2e8f0;
        }

        .code-block code {
            white-space: pre-wrap;
            display: block;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .option {
            padding: 1.25rem;
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--dark-bg);
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .option:hover {
            border-color: var(--primary-light);
            background: var(--dark-surface-light);
            transform: translateX(4px);
        }

        .option input[type="radio"],
        .option input[type="checkbox"] {
            width: 1.5rem;
            height: 1.5rem;
            cursor: pointer;
            accent-color: var(--primary-light);
            margin-top: 0.25rem;
            flex-shrink: 0;
        }

        .option-label {
            flex: 1;
            cursor: pointer;
            white-space: pre-line;
        }

        .option.correct {
            background: rgba(34, 197, 94, 0.1);
            border-color: var(--success);
        }

        .option.incorrect {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--error);
        }

        .option.selected.correct::after,
        .option.selected.incorrect::after {
            content: '';
            width: 1.5rem;
            height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .option.selected.correct::after {
            content: '‚úì';
            color: var(--success);
        }

        .option.selected.incorrect::after {
            content: '‚úó';
            color: var(--error);
        }

        .feedback-container {
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: 0.5rem;
            display: none;
        }

        .feedback-container.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback-correct {
            background: rgba(34, 197, 94, 0.1);
            border-left: 4px solid var(--success);
            color: var(--success);
        }

        .feedback-incorrect {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid var(--error);
            color: var(--error);
        }

        .feedback-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 1.125rem;
        }

        .hint-section,
        .explanation-section {
            margin-top: 1rem;
            color: var(--text-secondary);
            white-space: pre-line;
        }

        .hint-section strong,
        .explanation-section strong {
            color: var(--text-primary);
            display: block;
            margin-bottom: 0.5rem;
        }

        .question-controls {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .question-controls .btn {
            flex: 1;
            min-width: 120px;
        }

        .question-navigator {
            background: var(--dark-surface);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .navigator-title {
            font-weight: 600;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-secondary);
        }

        .navigator-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.5rem;
        }

        @media (max-width: 1024px) {
            .navigator-grid {
                grid-template-columns: repeat(10, 1fr);
            }
        }

        .navigator-item {
            width: 100%;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--border-color);
            border-radius: 0.375rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--dark-bg);
            font-weight: 600;
            font-size: 0.75rem;
        }

        .navigator-item:hover {
            border-color: var(--primary-light);
        }

        .navigator-item.answered {
            background: var(--primary-light);
            color: white;
            border-color: var(--primary-light);
        }

        .navigator-item.current {
            background: linear-gradient(135deg, var(--module1), var(--module2));
            color: white;
            border-color: var(--module1);
            box-shadow: 0 0 12px rgba(99, 102, 241, 0.5);
        }

        .navigator-item.skipped {
            background: var(--dark-surface);
            border-color: var(--border-color);
        }

        .navigator-legend {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 1rem;
            font-size: 0.75rem;
            color: var(--text-secondary);
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .legend-dot.answered {
            background: var(--primary-light);
        }

        .legend-dot.unanswered {
            background: var(--dark-bg);
            border: 1px solid var(--border-color);
        }

        .legend-dot.current {
            background: linear-gradient(135deg, var(--module1), var(--module2));
            box-shadow: 0 0 6px rgba(99, 102, 241, 0.5);
        }

        /* Results Screen */
        .results-screen {
            max-width: 900px;
            margin: 0 auto;
        }

        .results-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            margin: 2rem auto;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 4px solid;
            font-size: 3rem;
            font-weight: 700;
        }

        .score-circle.pass {
            border-color: var(--success);
            background: rgba(34, 197, 94, 0.1);
            color: var(--success);
        }

        .score-circle.fail {
            border-color: var(--error);
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        .score-percentage {
            font-size: 2rem;
        }

        .score-status {
            font-size: 1.5rem;
            margin-top: 2rem;
            text-align: center;
        }

        .score-status.pass {
            color: var(--success);
        }

        .score-status.fail {
            color: var(--error);
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 3rem 0;
        }

        .stat-card {
            background: var(--dark-surface);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: center;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--module1), var(--module2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modules-breakdown {
            background: var(--dark-surface);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .modules-breakdown h3 {
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
        }

        .module-score {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: var(--dark-bg);
            border-radius: 0.5rem;
            border-left: 4px solid;
        }

        .module-score.module1 { border-left-color: var(--module1); }
        .module-score.module2 { border-left-color: var(--module2); }
        .module-score.module3 { border-left-color: var(--module3); }
        .module-score.module4 { border-left-color: var(--module4); }

        .module-score-name {
            flex: 1;
            font-weight: 600;
        }

        .module-score-bar {
            flex: 2;
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            margin: 0 1rem;
        }

        .module-score-fill {
            height: 100%;
            transition: width 0.5s ease;
        }

        .module-score.module1 .module-score-fill { background: var(--module1); }
        .module-score.module2 .module-score-fill { background: var(--module2); }
        .module-score.module3 .module-score-fill { background: var(--module3); }
        .module-score.module4 .module-score-fill { background: var(--module4); }

        .module-score-value {
            min-width: 100px;
            text-align: right;
            font-weight: 700;
            color: var(--text-secondary);
        }

        .detailed-review {
            margin: 2rem 0;
        }

        .detailed-review h3 {
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
        }

        .review-item {
            background: var(--dark-surface);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid;
        }

        .review-item.correct {
            border-left-color: var(--success);
        }

        .review-item.incorrect {
            border-left-color: var(--error);
        }

        .review-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .review-item-number {
            font-weight: 700;
            color: var(--text-secondary);
        }

        .review-item-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .review-item-status.correct {
            color: var(--success);
        }

        .review-item-status.incorrect {
            color: var(--error);
        }

        .review-item-question {
            font-weight: 600;
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .review-item-code {
            background: var(--dark-bg);
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .review-item-code code {
            white-space: pre-wrap;
            display: block;
        }

        .review-answers {
            background: var(--dark-bg);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .answer-result {
            padding: 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
        }

        .answer-result.your-answer {
            background: rgba(99, 102, 241, 0.2);
            border-left: 3px solid var(--primary-light);
        }

        .answer-result.correct-answer {
            background: rgba(34, 197, 94, 0.2);
            border-left: 3px solid var(--success);
        }

        .answer-result label {
            display: block;
            color: var(--text-secondary);
            font-size: 0.75rem;
            margin-bottom: 0.25rem;
            text-transform: uppercase;
        }

        .answer-result-text {
            font-weight: 600;
            word-break: break-word;
        }

        .review-hint {
            background: rgba(245, 158, 11, 0.1);
            border-left: 3px solid var(--warning);
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
            color: var(--text-secondary);
        }

        .review-hint strong {
            color: var(--text-primary);
            display: block;
            margin-bottom: 0.5rem;
        }

        .review-explanation {
            background: rgba(16, 185, 129, 0.1);
            border-left: 3px solid var(--module4);
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .review-explanation strong {
            color: var(--text-primary);
            display: block;
            margin-bottom: 0.5rem;
        }

        .results-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 3rem;
            flex-wrap: wrap;
        }

        .results-actions .btn {
            min-width: 200px;
        }

        /* Modal / Dialog */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--dark-surface);
            border: 2px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .modal-text {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
        }

        .modal-actions .btn {
            flex: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .setup-header h1 {
                font-size: 1.875rem;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }

            .exam-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .exam-content {
                grid-template-columns: 1fr;
            }

            .question-navigator {
                order: -1;
                position: relative;
                top: auto;
            }

            .navigator-grid {
                grid-template-columns: repeat(10, 1fr);
            }

            .score-circle {
                width: 150px;
                height: 150px;
                font-size: 2.5rem;
            }

            .results-stats {
                grid-template-columns: 1fr;
            }
        }

        /* Accessibility */
        input:focus,
        button:focus,
        a:focus {
            outline: 2px solid var(--primary-light);
            outline-offset: 2px;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* ========== HINT STYLES ========== */
        .hint-section {
            margin-top: 1.5rem;
        }

        .hint-button {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #1e293b;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .hint-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
        }

        .hint-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background: #64748b;
        }

        .hint-box {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(251, 191, 36, 0.1);
            border-left: 4px solid #fbbf24;
            border-radius: 8px;
            animation: fadeIn 0.3s ease;
        }

        .hint-box strong {
            color: #fbbf24;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

    </style>
</head>
<body>
    <!-- Setup Screen -->
    <div id="setupScreen" class="screen active">
        <div class="container">
            <div class="setup-screen">
                <div class="setup-header">
                    <h1>PCEP-PREP-MEAL Exam Simulation</h1>
                    <p>Configure your exam settings and start practicing</p>
                </div>

                <!-- Module Selection -->
                <div class="setup-section">
                    <h2><span>üìö</span> Select Modules</h2>
                    <div class="checkbox-group" id="moduleCheckboxes">
                        <div class="checkbox-item">
                            <input type="checkbox" id="module1" value="1" checked>
                            <label for="module1">Module 1: Fundamentals</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="module2" value="2" checked>
                            <label for="module2">Module 2: Control Flow</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="module3" value="3" checked>
                            <label for="module3">Module 3: Data Collections</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="module4" value="4" checked>
                            <label for="module4">Module 4: Functions &amp; Exceptions</label>
                        </div>
                    </div>
                    <div class="min-modules-warning" id="minModulesWarning">
                        Please select at least one module
                    </div>
                </div>

                <!-- Question Count -->
                <div class="setup-section">
                    <h2><span>‚ùì</span> Number of Questions</h2>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Questions</span>
                            <span class="slider-value" id="questionCountValue">30</span>
                        </div>
                        <input type="range" id="questionCountSlider" min="10" max="100" value="30" step="5">
                    </div>
                </div>

                <!-- Timer Options -->
                <div class="setup-section">
                    <h2><span>‚è±Ô∏è</span> Timer Settings</h2>
                    <div class="timer-checkbox">
                        <input type="checkbox" id="enableTimer" checked>
                        <label for="enableTimer">Enable Timer</label>
                    </div>
                    <div class="timer-info" id="timerInfo">
                        <strong>Estimated time:</strong> <span id="estimatedTime">40</span> minutes
                    </div>
                </div>

                <!-- Answer Mode -->
                <div class="setup-section">
                    <h2><span>üëÅÔ∏è</span> Answer Mode</h2>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="modeEnd" name="answerMode" value="end" checked>
                            <div class="radio-item-content">
                                <label for="modeEnd">Show answers at the end</label>
                                <p>See all results after completing the exam</p>
                            </div>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="modeImmediate" name="answerMode" value="immediate">
                            <div class="radio-item-content">
                                <label for="modeImmediate">Show answers immediately</label>
                                <p>Get instant feedback with hints and explanations</p>
                            </div>
                        </div>
                    </div>
                </div>

                
                <!-- Hints Option -->
                <div class="setup-option">
                  <label class="checkbox-label">
                    <input type="checkbox" id="hintsEnabled">
                    <span>üí° Enable Hints (Show hint button during exam)</span>
                  </label>
                  <p class="option-description">
                    When enabled, you can reveal a hint for each question (tracked separately from answers)
                  </p>
                </div>

                <!-- Start Button -->
                <div class="setup-actions">
                    <button class="btn btn-primary btn-lg" id="startExamBtn" onclick="startExam()">
                        Start Exam ‚Üí
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Exam Screen -->
    <div id="examScreen" class="screen">
        <div class="container">
            <div class="exam-header">
                <div class="exam-progress">
                    <span class="progress-value" id="progressText">Question 1 of 30</span>
                </div>
                <div class="exam-timer" id="examTimer" role="timer">
                    <span id="timerDisplay">40:00</span>
                </div>
                <button class="btn btn-secondary exam-back" id="backToSetupBtn" onclick="confirmBackToSetup()">
                    ‚Üê Back to Setup
                </button>
            </div>

            <div class="exam-content">
                <div class="question-container">
                    <div class="question-number" id="questionNum">Question 1 of 30</div>
                    <div class="question-text" id="questionText">Loading question...</div>

                    <div class="code-block" id="codeBlock" style="display: none;">
                        <code id="codeContent"></code>
                    </div>

                    <div class="options-container" id="optionsContainer">
                        <!-- Options will be dynamically inserted -->
                    </div>

                    <div class="feedback-container" id="feedbackContainer">
                        <!-- Feedback will be dynamically inserted -->
                    </div>
                    <!-- Hints Section -->
                    <div class="hint-section" id="hintSection" style="display: none;">
                        <button class="hint-button" id="hintButton" onclick="toggleHint()">
                            üí° Show Hint
                        </button>
                        <div class="hint-box" id="hintBox" style="display: none;">
                            <strong>üí° Hint:</strong> <span id="hintText"></span>
                        </div>
                    </div>

                    <div class="question-controls">
                        <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>
                            ‚Üê Previous
                        </button>
                        <button class="btn btn-secondary" id="skipBtn" onclick="skipQuestion()">
                            Skip Question
                        </button>
                        <button class="btn btn-primary" id="submitBtn" onclick="submitAnswer()" style="display: none;">
                            Submit Answer
                        </button>
                        <button class="btn btn-secondary" id="nextBtn" onclick="nextQuestion()">
                            Next ‚Üí
                        </button>
                        <button class="btn btn-primary" id="finishBtn" onclick="confirmFinishExam()" style="display: none;">
                            Finish Exam
                        </button>
                    </div>
                </div>

                <div class="question-navigator">
                    <div class="navigator-title">Progress</div>
                    <div class="navigator-grid" id="navigatorGrid">
                        <!-- Navigator items will be dynamically inserted -->
                    </div>
                    <div class="navigator-legend">
                        <div class="legend-item">
                            <div class="legend-dot answered"></div>
                            <span>Answered</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot unanswered"></div>
                            <span>Unanswered</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot current"></div>
                            <span>Current</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="resultsScreen" class="screen">
        <div class="container">
            <div class="results-screen">
                <div class="results-header">
                    <h1>Exam Results</h1>
                    <div class="score-circle" id="scoreCircle">
                        <div class="score-percentage" id="scorePercentage">0%</div>
                    </div>
                    <div class="score-status" id="scoreStatus">Loading...</div>
                </div>

                <div class="results-stats">
                    <div class="stat-card">
                        <div class="stat-label">Total Score</div>
                        <div class="stat-value" id="totalScoreDisplay">0/0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Time Taken</div>
                        <div class="stat-value" id="timeTakenDisplay">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Correct Answers</div>
                        <div class="stat-value" id="correctAnswersDisplay">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Hints Used</div>
                        <div class="stat-value" id="hintsUsedCount">0</div>
                    </div>
                </div>

                <div class="modules-breakdown" id="modulesBreakdown" style="display: none;">
                    <h3>Performance by Module</h3>
                    <div id="moduleScoresContainer"></div>
                </div>

                <div class="detailed-review">
                    <h3>Detailed Review</h3>
                    <div id="detailedReviewContainer"></div>
                </div>

                <div class="results-actions">
                    <button class="btn btn-primary btn-lg" onclick="resetToSetup()">
                        Try Again
                    </button>
                    <button class="btn btn-secondary btn-lg" onclick="location.reload()">
                        Back to Overview
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="backToSetupModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Back to Setup?</div>
            <div class="modal-text">
                Your exam progress will be lost. Are you sure you want to go back to the setup screen?
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeModal('backToSetupModal')">
                    Continue Exam
                </button>
                <button class="btn btn-primary" onclick="backToSetup()">
                    Yes, Go Back
                </button>
            </div>
        </div>
    </div>

    <div id="finishExamModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Finish Exam?</div>
            <div class="modal-text" id="finishExamModalText">
                Are you sure you want to finish the exam? You have not answered all questions.
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeModal('finishExamModal')">
                    Continue Exam
                </button>
                <button class="btn btn-primary" onclick="finishExam()">
                    Yes, Finish
                </button>
            </div>
        </div>
    </div>

    <script>
        // State Management
        const state = {
            questions: [],
            currentQuestionIndex: 0,
            answers: {}, // { questionIndex: selectedOptionIndex | selectedOptionIndexes[] }
            skipped: new Set(),
            startTime: null,
            timerInterval: null,
            timeRemaining: 0,
            selectedModules: [1, 2, 3, 4],
            questionCount: 30,
            enableTimer: true,
            answerMode: 'end', // 'end' or 'immediate'
            showFeedback: false,
            hintsUsed: new Set(),  // NEU - Track which questions used hints
        };

        // Embedded questions bank - self-contained, no fetch needed
        const QUESTIONS_BANK = {"module1":[{"id":"m1_251","question_number":251,"module":1,"prompt":"What will be the output of the following code, and why?","code":"total_items = 10\ntotal_items += 5\nprint(total_items)","options":["`5`, because `total_items` is reassigned to `5`.","`10`, because the addition is incorrect.","`15`, because `total_items` is incremented by `5`.","`20`, because `total_items` doubles with each addition."],"answer":2,"correct_answer":"C","hint":"`total_items` increases by `5` to become `15`.","explanation":"`total_items` increases by `5` to become `15`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_252","question_number":252,"module":1,"prompt":"What will the following code print?","code":"lst = [[1, 2], [3, 4], [5, 6]]\nlst[0], lst[2] = lst[2], lst[0]\nprint(lst)","options":["`[[1, 2], [3, 4], [5, 6]]`","`[[5, 6], [3, 4], [1, 2]]`","`[[1, 2], [5, 6], [3, 4]]`","`[[5, 4], [3, 2], [1, 6]]`"],"answer":1,"correct_answer":"B","hint":"The elements `lst[0]` and `lst[2]` are swapped, resulting in `[[5, 6], [3, 4], [1, 2]]`.","explanation":"The elements `lst[0]` and `lst[2]` are swapped, resulting in `[[5, 6], [3, 4], [1, 2]]`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_253","question_number":253,"module":1,"prompt":"Which of the following best describes machine language?","code":"","options":["It is the language in which humans naturally communicate.","It is a complex and evolving language used by computers.","It consists of a predefined set of simple commands that a computer can execute.","It allows computers to understand human emotions and respond accordingly."],"answer":2,"correct_answer":"C","hint":"Machine language consists of a predefined set of commands known as an instruction list (IL) that the computer can execute.","explanation":"Machine language consists of a predefined set of commands known as an instruction list (IL) that the computer can execute.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_254","question_number":254,"module":1,"prompt":"Given the code snippet below, what will be printed to the console?","code":"print(\"Start\", end=\"-->\")\nprint(\"End\")","options":["`Start End`","`Start-> End`","`Start->End`","`Start End->`"],"answer":2,"correct_answer":"C","hint":"The `end` parameter sets the string that terminates the `print` statement.","explanation":"The `end` parameter sets the string that terminates the `print` statement.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_255","question_number":255,"module":1,"prompt":"What is the primary challenge of dynamic typing in Python?","code":"","options":["Variables must be declared before use.","It can lead to unexpected type errors at runtime.","Variable types must be explicitly defined.","Variables cannot be reassigned once a type is set."],"answer":1,"correct_answer":"B","hint":"Dynamic typing can lead to errors that only appear during execution.","explanation":"Dynamic typing can lead to errors that only appear during execution.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_256","question_number":256,"module":1,"prompt":"What does an EOF error typically indicate in Python?","code":"","options":["The code is too long and needs to be shortened.","The interpreter has reached the end of the file but expects more code.","The file was not saved correctly before running.","The code is missing a necessary import statement."],"answer":1,"correct_answer":"B","hint":"An EOF (End of File) error usually indicates that the interpreter expects additional code, often due to an unclosed parenthesis or incomplet","explanation":"An EOF (End of File) error usually indicates that the interpreter expects additional code, often due to an unclosed parenthesis or incomplete statement.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_257","question_number":257,"module":1,"prompt":"Which of the following expressions evaluate to a zero result?","code":"","options":["1 // 3 * 3 ** 1","1 ** 2 - 7 // 3","1 + 3 // 2 - 1","4 / 2 - 2 ** 2"],"answer":0,"correct_answer":"A","hint":"1//3 rounds down to 0 and 3**1 = 3, and 0 * 3 is 0.","explanation":"1//3 rounds down to 0 and 3**1 = 3, and 0 * 3 is 0.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m1_258","question_number":258,"module":1,"prompt":"What will `lst` look like after execution?","code":"lst = [1, 2, 3, 4, 5, 6]\ndel lst[2:4]\nprint(lst)","options":["`[1, 2, 4, 5, 6]`","`[1, 2, 4, 6]`","`[1, 2, 5, 6]`","`[1, 2, 6]`"],"answer":2,"correct_answer":"C","hint":"The slice removes elements `3` and `4`, leaving `[1, 2, 5, 6]`.","explanation":"The slice removes elements `3` and `4`, leaving `[1, 2, 5, 6]`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_259","question_number":259,"module":1,"prompt":"What is the difference in output between these two expressions?","code":"a = 2 ** 3 ** 2\nb = (2 ** 3) ** 2","options":["`a = 512, b = 64`","`a = 64, b = 512`","`a = 8, b = 64`","`a = 256, b = 64`"],"answer":0,"correct_answer":"A","hint":"`2 ** 9 = 512` and `(2 ** 3) ** 2 = 64`.","explanation":"`2 ** 9 = 512` and `(2 ** 3) ** 2 = 64`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m1_260","question_number":260,"module":1,"prompt":"What special character in Python strings is used to include special characters like a newline?","code":"","options":["`\\\\`","`//`","`\\`","`/`"],"answer":2,"correct_answer":"C","hint":"The backslash (`\\`) is used to escape characters, giving them special meaning.","explanation":"The backslash (`\\`) is used to escape characters, giving them special meaning.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_261","question_number":261,"module":1,"prompt":"What is the primary role of an interpreter when executing a program?","code":"","options":["To translate the entire source code into machine language at once.","To read and execute the source code line by line.","To compile the code into a distributable file.","To optimise the code for faster execution."],"answer":1,"correct_answer":"B","hint":"An interpreter reads and executes the source code line by line.","explanation":"An interpreter reads and executes the source code line by line.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_262","question_number":262,"module":1,"prompt":"What is the result of executing this code?","code":"my_list = [0, 2, 4, 6, 8]\nmy_list[::2] = [10, 20, 30]","options":["`[10, 2, 20, 6, 30]`","`[0, 2, 4, 6, 8]`","`[10, 20, 30]`","`[10, 2, 4, 6, 30]`"],"answer":0,"correct_answer":"A","hint":"The step slice replaces every second element with the values `[10, 20, 30]`.","explanation":"The step slice replaces every second element with the values `[10, 20, 30]`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m1_263","question_number":263,"module":1,"prompt":"How does Python compute the following operation `10 // 3`, and what is the result?","code":"result = 10 // 3\nprint(result)","options":["Rounds 10 down to 9 and then divides by 3, resulting in `3`.","Divides 10 by 3 and rounds up the nearest whole number, resulting in `4`.","Divides 10 by 3 and rounds down to the nearest whole number, resulting in `3`.","Divides 10 by 3 and returns the remainder, resulting in `1`."],"answer":2,"correct_answer":"C","hint":"Python performs integer division, resulting in `3`.","explanation":"Python performs integer division, resulting in `3`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_264","question_number":264,"module":1,"prompt":"Why must a program be correct syntactically?","code":"","options":["To ensure the program's logical meaning is accurate.","To ensure the program is written in a recognisable script.","To ensure the program follows the language's rules.","To ensure the program's dictionary is correctly used."],"answer":2,"correct_answer":"C","hint":"Syntactical correctness ensures the program adheres to the language's rules.","explanation":"Syntactical correctness ensures the program adheres to the language's rules.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_265","question_number":265,"module":1,"prompt":"What will be the output of the following code?","code":"print(\"Hello\", \"world\", sep=\"*\")","options":["`Hello world*`","`Hello*world`","`Hello* world`","`Hello world`"],"answer":1,"correct_answer":"B","hint":"The `sep` parameter specifies the separator between the arguments, resulting in `Hello*world`.","explanation":"The `sep` parameter specifies the separator between the arguments, resulting in `Hello*world`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_266","question_number":266,"module":1,"prompt":"Which of the following best explains why multi-line comments might be necessary?","code":"","options":["They disable large sections of code for debugging purposes.","They provide a detailed explanation of complex code logic.","They are required for every function definition.","They are used to declare variables."],"answer":1,"correct_answer":"B","hint":"Multi-line comments are often used to explain complex code.","explanation":"Multi-line comments are often used to explain complex code.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_267","question_number":267,"module":1,"prompt":"What is unique about the creation of Python compared to many other programming languages?","code":"","options":["It was created by a large corporate team.","It was developed primarily for creating web applications.","It was the first programming language to use dynamic semantics.","It was created by a single individual."],"answer":3,"correct_answer":"D","hint":"Python was uniquely created by a single individual, Guido van Rossum.","explanation":"Python was uniquely created by a single individual, Guido van Rossum.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m1_268","question_number":268,"module":1,"prompt":"What is the output of this code?","code":"numbers = [1, 2, 3, 4, 5]\nnumbers[-3:] = [7, 8]\nprint(numbers)","options":["`[1, 2, 7, 8]`","`[7, 8, 3, 4, 5]`","`[1, 2, 7, 8, 8]`","`[1, 2, 7, 8, 8, 5]`"],"answer":0,"correct_answer":"A","hint":"The slice `[-3:]` replaces `[3, 4, 5]` with `[7, 8]`, resulting in `[1, 2, 7, 8]`.","explanation":"The slice `[-3:]` replaces `[3, 4, 5]` with `[7, 8]`, resulting in `[1, 2, 7, 8]`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m1_269","question_number":269,"module":1,"prompt":"What will be printed?","code":"x = 7\nif x > 10:\n    print(\"Greater than 10\")\nelif x == 10:\n    print(\"Equal to 10\")\nelif x > 5:\n    print(\"Greater than 5\")\nelse:\n    print(\"Less than or equal to 5\")","options":["Greater than 10","Equal to 10","Greater than 5","Less than or equal to 5"],"answer":2,"correct_answer":"C","hint":"`x > 5` is `True`, so this block is executed and \"Greater than 5\" is printed.","explanation":"`x > 5` is `True`, so this block is executed and \"Greater than 5\" is printed.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_270","question_number":270,"module":1,"prompt":"What is a significant advantage of interpreted code?","code":"","options":["It executes faster than compiled code.","It does not require any additional software to run.","It is translated into, and remains as, machine language.","It can be run as soon as it is written."],"answer":3,"correct_answer":"D","hint":"Interpreted code can be executed immediately without a separate translation phase.","explanation":"Interpreted code can be executed immediately without a separate translation phase.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m1_271","question_number":271,"module":1,"prompt":"What will the output of the following code be?","code":"print(\"I\\'m learning Python.\")","options":["`I'm learning Python.`","`I\\'m learning Python.`","`I¬¥m learning Python.`","`I am learning Python.`"],"answer":0,"correct_answer":"A","hint":"The backslash escapes the apostrophe, allowing it to be part of the string.","explanation":"The backslash escapes the apostrophe, allowing it to be part of the string.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m1_272","question_number":272,"module":1,"prompt":"What will be the output of the following code when executed?","code":"t1 = (1, 2, 3)\nt2 = t1 + (4, 5)\nprint(t1)\nprint(t2)","options":["`(1, 2, 3)`, `(1, 2, 3, 4, 5)`","`(1, 2, 3, 4, 5)`, `(1, 2, 3, 4, 5)`","`(1, 2, 3)`, `(4, 5)`","`(4, 5)`, `(1, 2, 3)`"],"answer":0,"correct_answer":"A","hint":"Tuples are immutable, so `t1` remains unchanged, and `t2` is a new tuple with additional elements.","explanation":"Tuples are immutable, so `t1` remains unchanged, and `t2` is a new tuple with additional elements.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m1_273","question_number":273,"module":1,"prompt":"What does the \"traceback\" in a Python error message indicate?","code":"","options":["The final output of the program.","The sequence of function calls leading to the error.","The exact cause of the error.","The variable values at the time of the error."],"answer":1,"correct_answer":"B","hint":"The traceback indicates the sequence of function calls or the path the code took before encountering the error.","explanation":"The traceback indicates the sequence of function calls or the path the code took before encountering the error.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_274","question_number":274,"module":1,"prompt":"What does the following code output?","code":"n_dim = [[[1, 2], [3, 4]], [[5, 6], [7, 8]]]\nprint(n_dim[1][0][1])","options":["2","5","6","4"],"answer":2,"correct_answer":"C","hint":"The correct element is located at index `[1][0][1]`, which is `6`.","explanation":"The correct element is located at index `[1][0][1]`, which is `6`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_275","question_number":275,"module":1,"prompt":"What is the output?","code":"for i in range(5):\n    if i == 2:\n        continue\n    print(i, end=' ')\nelse:\n    print('Done')","options":["0 1 2 Done","0 1 3 4 Done","0 1 3 4","0 1 2 3 4 Done"],"answer":1,"correct_answer":"B","hint":"The `continue` statement skips printing `2`, but \"Done\" is still printed by the `else` clause.","explanation":"The `continue` statement skips printing `2`, but \"Done\" is still printed by the `else` clause.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_276","question_number":276,"module":1,"prompt":"What will be the result of the following expression?","code":"result = 2 + 3 * 5 ** 2 // 4 - 6","options":["`21`","`19`","`14`","`17`"],"answer":2,"correct_answer":"C","hint":"The expression evaluates as `2 + (3 * (25 // 4)) - 6 = 14`.","explanation":"The expression evaluates as `2 + (3 * (25 // 4)) - 6 = 14`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_277","question_number":277,"module":1,"prompt":"Why does the following code produce a `KeyError`, and how can you handle it to prevent the program from crashing?","code":"my_dict = {'name': 'Alice', 'age': 25}\nprint(my_dict['address'])","options":["The key `'address'` does not exist; handle by using `my_dict.get('address')`.","The dictionary is missing; handle by creating it first.","The key `'address'` is protected; handle by renaming the key.","The dictionary is immutable; handle by converting to a list."],"answer":0,"correct_answer":"A","hint":"Using `my_dict.get('address')` returns `None` if the key doesn't exist, avoiding a `KeyError`.","explanation":"Using `my_dict.get('address')` returns `None` if the key doesn't exist, avoiding a `KeyError`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m1_278","question_number":278,"module":1,"prompt":"Why is it important to save a Python file with the `.py` extension?","code":"# Save as script.py\nprint(\"Hello from Python\")","options":["To prevent the code from being executed by mistake.","To ensure the operating system recognises the file as a Python script.","To allow the file to be used with other programming languages.","To make the file hidden from the user."],"answer":1,"correct_answer":"B","hint":"Saving the file with a `.py` extension ensures that the operating system identifies it as a Python script.","explanation":"Saving the file with a `.py` extension ensures that the operating system identifies it as a Python script.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_279","question_number":279,"module":1,"prompt":"How can misleading comments impact code, and which of the following scenarios best demonstrates this?","code":"# Misleading comment: reverse keeps original order\nlst = [10, 20, 30]\nlst.reverse()\nlst.append(40)\nlst.sort()\nprint(lst)","options":["Comments are ignored by the interpreter and do not cause syntax errors.","Comments do not affect code execution or performance.","Misleading comments create confusion, not clarity.","Misleading comments can lead to misunderstandings and errors in code maintenance."],"answer":3,"correct_answer":"D","hint":"Misleading comments can lead to misunderstandings and errors in code maintenance","explanation":"Misleading comments can lead to misunderstandings and errors in code maintenance. Consider the following list operations: lst = [10, 20, 30] lst.reverse() lst.append(40) lst.sort()","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m1_280","question_number":280,"module":1,"prompt":"What is the final state of `lst`?","code":"lst = [10, 20, 30]\nlst.reverse()\nlst.append(40)\nlst.sort()\nprint(lst)","options":["`[40, 30, 20, 10]`","`[10, 20, 30, 40]`","`[40, 30, 20]`","`[30, 20, 10, 40]`"],"answer":1,"correct_answer":"B","hint":"The list is reversed, appended with `40`, and then sorted in ascending order.","explanation":"The list is reversed, appended with `40`, and then sorted in ascending order.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_281","question_number":281,"module":1,"prompt":"What is the result of the following expression?","code":"not (True or False) and (True and not False)","options":["True","None of the other answers","SyntaxError","False"],"answer":3,"correct_answer":"D","hint":"The expression simplifies to `False and True`, which results in `False`.","explanation":"The expression simplifies to `False and True`, which results in `False`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m1_282","question_number":282,"module":1,"prompt":"Which of the following best describes the term \"Lexis\" in a language?","code":"","options":["The rules for forming a valid sentence","The set of words in a language","The symbols used to build words","The logical structure of phrases"],"answer":1,"correct_answer":"B","hint":"Lexis refers to the set of words a language offers its users.","explanation":"Lexis refers to the set of words a language offers its users.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_283","question_number":283,"module":1,"prompt":"What will the following code output?","code":"lst = [\"A\", \"B\", \"C\", \"D\", \"E\"]\nslice_one = lst[-3:]\nslice_two = lst[:-3]\nprint(slice_one, slice_two)","options":["`['C', 'D', 'E']` and `['A', 'B']`","`['A', 'B', 'C']` and `['D', 'E']`","`['C', 'D']` and `['A', 'B', 'E']`","`['B', 'C', 'D']` and `['A', 'E']`"],"answer":0,"correct_answer":"A","hint":"`[-3:]` slices from the third last element to the end, and `[:-3]` slices up to the third last element.","explanation":"`[-3:]` slices from the third last element to the end, and `[:-3]` slices up to the third last element.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m1_284","question_number":284,"module":1,"prompt":"Which of the following statements most accurately reflects the relationship between high-level programming languages and machine code execution?","code":"source = \"print('Hello')\"\n# The interpreter translates source code into lower-level instructions\n# the CPU can execute as machine operations.","options":["High-level languages directly control hardware by manipulating machine code, allowing for optimised execution speeds.","High-level languages offer an abstracted syntax that is compiled or interpreted into machine code, balancing human readability with the need for efficient execution.","High-level languages are primarily designed for system-level programming, where direct memory management and hardware interaction are critical.","High-level languages inherently remove the necessity for machine code translation, thereby bypassing the need for compilation or interpretation."],"answer":1,"correct_answer":"B","hint":"High-level languages are designed for human readability and are abstracted away from machine code, requiring compilation or interpretation t","explanation":"High-level languages are designed for human readability and are abstracted away from machine code, requiring compilation or interpretation to be executed by the machine.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_285","question_number":285,"module":1,"prompt":"What are the contents of `new_list` after execution?","code":"my_list = [\"apple\", \"banana\"]\nnew_list = my_list[:]\nmy_list.append(\"cherry\")\nprint(new_list)","options":["`[\"apple\", \"banana\"]`","`[\"apple\", \"banana\", \"cherry\"]`","`[\"apple\", \"cherry\"]`","`[\"banana\", \"cherry\"]`"],"answer":0,"correct_answer":"A","hint":"The slicing operation creates a copy of the entire list, so new_list is unaffected by changes to my_list.","explanation":"new_list is created via slicing (`my_list[:]`), which produces a separate list. Appending to my_list does not modify new_list.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m1_286","question_number":286,"module":1,"prompt":"Will modifying `colors_copy` affect `colors`?","code":"colors = [\"red\", \"green\", \"blue\"]\ncolors_copy = colors[:]\ncolors_copy.append(\"yellow\")\nprint(colors)\nprint(colors_copy)","options":["No, because slicing creates a new list independent of `colors`.","Yes, because `colors_copy` is a reference to `colors`.","Yes, because lists are mutable and changes reflect across copies.","No, because only the original list is modifiable."],"answer":0,"correct_answer":"A","hint":"The slice operation creates a copy, so changes to `colors_copy` do not affect `colors`.","explanation":"The slice operation creates a copy, so changes to `colors_copy` do not affect `colors`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m1_287","question_number":287,"module":1,"prompt":"Which of the following is a self-commenting variable name?","code":"","options":["`a`","`x`","`radius`","`var1`"],"answer":2,"correct_answer":"C","hint":"`radius` clearly indicates what the variable represents.","explanation":"`radius` clearly indicates what the variable represents.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_288","question_number":288,"module":1,"prompt":"Which of the following statements best explains the primary disadvantage of interpreted code?","code":"","options":["It is prone to syntax errors that cannot be detected until runtime.","It requires recompilation every time the source code is modified.","It generally runs slower than compiled code due to real-time interpretation.","It cannot be executed on different platforms without modification."],"answer":2,"correct_answer":"C","hint":"Interpreted code is typically slower because it is translated in real-time during execution.","explanation":"Interpreted code is typically slower because it is translated in real-time during execution.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_289","question_number":289,"module":1,"prompt":"What is the precedence of the and operator compared to the or operator in Python?","code":"x = True\ny = False\nz = False\nprint(x or y and z)\n# and is evaluated before or","options":["or has higher precedence than and","They have the same precedence","Precedence depends on their position in the expression","and has higher precedence than or"],"answer":3,"correct_answer":"D","hint":"In Python, the and operator has higher precedence than the or operator, meaning and operations are evaluated before or operations in express","explanation":"In Python, the and operator has higher precedence than the or operator, meaning and operations are evaluated before or operations in expressions without parentheses. Consider the following Python code: my_dict = {\"one\": \"two\", \"two\": \"three\", \"three\": \"one\"} current = \"one\" for _ in range(4): current = my_dict[current] print(current)","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m1_290","question_number":290,"module":1,"prompt":"What will be the output of this code?","code":"my_dict = {\"one\": \"two\", \"two\": \"three\", \"three\": \"one\"}\ncurrent = \"one\"\nfor _ in range(4):\n    current = my_dict[current]\nprint(current)","options":["three","two","one","It will raise a `KeyError`"],"answer":1,"correct_answer":"B","hint":"Iteration 1: current = my_dict[\"one\"] ‚Üí \"two\" Iteration 2: current = my_dict[\"two\"] ‚Üí \"three\" Iteration 3: current = my_dict[\"three\"] ‚Üí \"one","explanation":"Iteration 1: current = my_dict[\"one\"] ‚Üí \"two\" Iteration 2: current = my_dict[\"two\"] ‚Üí \"three\" Iteration 3: current = my_dict[\"three\"] ‚Üí \"one\" Iteration 4: current = my_dict[\"one\"] ‚Üí \"two\" Final Output: \"two\"","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_291","question_number":291,"module":1,"prompt":"What will be the output?","code":"my_dict = {\"a\": 1, \"b\": 2}\nprint(my_dict.get('c', 3))","options":["`None`","`2`","`3`","`KeyError`"],"answer":2,"correct_answer":"C","hint":"Since the key `'c'` is not found in `my_dict`, the function returns the `default` value provided in the function call","explanation":"Since the key `'c'` is not found in `my_dict`, the function returns the `default` value provided in the function call. Here, `3` is passed as the `default` argument, which overwrites the function's default parameter value of `None`. Therefore, `3` is returned.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m1_292","question_number":292,"module":1,"prompt":"Which of the following is NOT an advantage of using Python in backend web development?","code":"","options":["Python's readability and ease of learning.","Python's speed of execution for performance-critical applications.","Python's extensive libraries and frameworks like Django and Flask.","Python's active community and extensive documentation."],"answer":1,"correct_answer":"B","hint":"Python's execution speed is generally slower, which is a disadvantage.","explanation":"Python's execution speed is generally slower, which is a disadvantage.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m1_293","question_number":293,"module":1,"prompt":"What is true about compilation? (Select two answers)","code":"","options":["It tends to be faster than interpretation.","The code is converted directly into machine code executable by the processor.","It tends to be slower than interpretation.","Both you and the end user must have the compiler to run your code."],"answers":[0,1],"answer":0,"correct_answer":"A, B","hint":"Focus on the classic advantages of compiled languages.","explanation":"Compiled code usually executes faster, and source is translated to machine code before runtime. End users usually do not need a compiler.","difficulty":"medium","source":"official-pcep-ocr-multi"},{"id":"m1_294","question_number":294,"module":1,"prompt":"Select the true statements. (Select two answers)","code":"","options":["Python is free, open-source, and multiplatform.","Python 3 is backward compatible with Python 2.","Python is a good choice for creating and executing tests for applications.","Python is a good choice for low-level programming, for example when implementing an effective driver."],"answers":[0,2],"answer":0,"correct_answer":"A, C","hint":"Think about Python strengths and known limitations.","explanation":"Python is open-source and great for testing/automation. Python 3 is not backward compatible with Python 2, and Python is not ideal for low-level driver development.","difficulty":"medium","source":"official-pcep-ocr-multi"},{"id":"m1_295","question_number":295,"module":1,"prompt":"A keyword is a word that: (Select two answers)","code":"","options":["is the most important word in the whole program.","cannot be used as a function name.","cannot be used as a variable name.","must be written in uppercase letters."],"answers":[1,2],"answer":1,"correct_answer":"B, C","hint":"Keywords are reserved identifiers.","explanation":"Python keywords are reserved and cannot be used as identifiers such as variable or function names.","difficulty":"medium","source":"official-pcep-ocr-multi"},{"id":"m1_296","question_number":296,"module":1,"prompt":"Which of the following statements are true? (Select two answers)","code":"# Evaluate each statement using Python rules:\n# / returns float, ** is right-associative, and division by zero raises an error.","options":["The result of the / operator is always an integer value.","Addition precedes multiplication.","The ** operator uses right-sided binding.","The right argument of the / operator cannot be zero."],"answers":[2,3],"answer":2,"correct_answer":"C, D","hint":"Remember precedence and division by zero rules.","explanation":"** is right-associative. Dividing by zero raises an error. / returns float, and multiplication has higher precedence than addition.","difficulty":"medium","source":"official-pcep-ocr-multi"},{"id":"m1_297","question_number":297,"module":1,"prompt":"Which of the following variable names are illegal? (Select two answers)","code":"# Check each candidate identifier against Python naming rules and reserved keywords.","options":["true_value","True","and","value_true"],"answers":[1,2],"answer":1,"correct_answer":"B, C","hint":"Keywords and boolean literals cannot be used as identifiers.","explanation":"True is a boolean literal and and is a reserved keyword, so both are illegal identifiers. true_value and value_true are valid names.","difficulty":"medium","source":"official-pcep-ocr-multi"},{"id":"m1_298","question_number":298,"module":1,"prompt":"Which of the following statements are true about None? (Select two answers)","code":"x = None\nprint(x is None)\nprint(x == None)\n# print(x + 1)  # TypeError","options":["The None value cannot be used outside functions.","The None value can be compared with variables.","The None value can be assigned to variables.","The None value can be used as an argument of arithmetic operators without errors."],"answers":[1,2],"answer":1,"correct_answer":"B, C","hint":"None is a normal singleton object in Python.","explanation":"None can be assigned and compared. Arithmetic with None generally raises TypeError.","difficulty":"medium","source":"official-pcep-ocr-multi"},{"id":"m1_299","question_number":307,"module":1,"prompt":"What is the output of this expression?","code":"print(-7 // 2)","options":["-3","-4","3","4"],"answer":1,"correct_answer":"B","hint":"Floor division rounds down toward negative infinity.","explanation":"`-7 / 2` is `-3.5`; floor division rounds down to `-4`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m1_300","question_number":308,"module":1,"prompt":"What is the value of `2 ** 3 ** 2`?","code":"print(2 ** 3 ** 2)","options":["64","512","256","16"],"answer":1,"correct_answer":"B","hint":"`**` is right-associative.","explanation":"Python evaluates it as `2 ** (3 ** 2) = 2 ** 9 = 512`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m1_301","question_number":309,"module":1,"prompt":"What type does `input()` return?","code":"value = input(\"Enter something: \")\nprint(type(value).__name__)","options":["int","float","str","bool"],"answer":2,"correct_answer":"C","hint":"User input is text unless converted.","explanation":"`input()` always returns a string; convert with `int()` or `float()` when needed.","difficulty":"medium","source":"curated-enhanced-2026","answers":[2]},{"id":"m1_302","question_number":310,"module":1,"prompt":"Which option correctly describes `bool(\"0\")` and `bool([0])`?","code":"print(bool(\"0\"))\nprint(bool([0]))","options":["Both are False","Both are True","First is False, second is True","First is True, second is False"],"answer":1,"correct_answer":"B","hint":"Non-empty containers are truthy.","explanation":"Both `\"0\"` and `[0]` are non-empty, so both evaluate to `True`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m1_303","question_number":311,"module":1,"prompt":"Which file extension is typically used for Python source files?","code":"","options":[".pt",".py",".pyt",".python"],"answer":1,"correct_answer":"B","hint":"Standard Python scripts use a short two-letter extension.","explanation":"Python source files are conventionally saved with the `.py` extension.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m1_304","question_number":312,"module":1,"prompt":"What are the four fundamental elements of a language in this context?","code":"","options":["Alphabet, lexis, syntax, semantics","Alphabet, morphology, syntax, pragmatics","Symbols, compiler, interpreter, runtime","Lexis, parser, debugger, semantics"],"answer":0,"correct_answer":"A","hint":"Think vocabulary and rules.","explanation":"The core elements are alphabet, lexis (dictionary), syntax, and semantics.","difficulty":"medium","source":"curated-enhanced-2026","answers":[0]},{"id":"m1_305","question_number":313,"module":1,"prompt":"Compilation vs interpretation: which statements are true? (Select two answers)","code":"","options":["Compiled code is translated before execution and can run without recompiling each launch.","Interpreted code is always faster than compiled code.","Interpreted code usually requires an interpreter at runtime.","Compilation prevents any runtime errors."],"answer":0,"correct_answer":"A, C","hint":"Compare translation time and runtime dependency.","explanation":"Compilation happens ahead of time, while interpreted execution needs an interpreter; speed and runtime errors depend on many factors.","difficulty":"medium","source":"curated-enhanced-2026","answers":[0,2]},{"id":"m1_306","question_number":314,"module":1,"prompt":"Which statement best describes machine language?","code":"","options":["A natural language for user interaction","A predefined set of simple executable instructions","A high-level language with rich syntax","A language that directly stores comments and docs"],"answer":1,"correct_answer":"B","hint":"Machine language is low-level and hardware-executable.","explanation":"Machine language consists of low-level instructions a processor can execute directly.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m1_341","question_number":341,"module":1,"prompt":"Which statements about keywords and identifiers are true? (Select two answers)","code":"","options":["`True` can be used as a variable name if assigned once.","`and` is a reserved keyword and cannot be an identifier.","`true_value` is a valid identifier in Python.","`for` can be used as a function name when lowercase."],"answers":[1,2],"answer":1,"correct_answer":"B, C","hint":"Python keywords and boolean literals are protected names.","explanation":"`and` and `for` are keywords, and `True` is a boolean literal, so they are illegal identifiers. `true_value` follows identifier rules and is legal.","difficulty":"medium","source":"pcep-raw-multiselect-2026"}],"module2":[{"id":"m2_290","question_number":290,"module":2,"prompt":"What is the origin of the name \"Python\" for the programming language?","code":"","options":["It is named after a type of snake.","It is named after its creator, Guido van Rossum.","It is an acronym for \"Programming You.\"","It is named after a British comedy series."],"answer":3,"correct_answer":"D","hint":"The name comes from the British comedy series *Monty Python's Flying Circus.","explanation":"The name comes from the British comedy series *Monty Python's Flying Circus.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m2_291","question_number":291,"module":2,"prompt":"Given the statement `x >= 0 and x <= 10`, how could you rewrite this condition using the `not` operator?","code":"x = 7\n# original\nprint(x >= 0 and x <= 10)\n# rewritten\nprint(not (x < 0 or x > 10))","options":["`not (x > 0 and x < 10)`","`not (x > 0 or x < 10)`","`not (x < 0 and x > 10)`","`not (x < 0 or x > 10)`"],"answer":3,"correct_answer":"D","hint":"`not (x < 0 or x > 10)` is logically equivalent to `x >= 0 and x <= 10`.","explanation":"`not (x < 0 or x > 10)` is logically equivalent to `x >= 0 and x <= 10`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m2_292","question_number":292,"module":2,"prompt":"Why is understanding the difference between built-in and user-defined functions crucial for debugging in Python?","code":"","options":["Built-in functions can be overwritten, leading to unexpected results.","User-defined functions are always faster than built-in functions.","Built-in functions are imported explicitly, unlike user-defined ones.","User-defined functions are automatically available without import, unlike built-in functions."],"answer":0,"correct_answer":"A","hint":"Overwriting built-in functions can cause unexpected behaviour and make debugging more complex.","explanation":"Overwriting built-in functions can cause unexpected behaviour and make debugging more complex.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m2_293","question_number":293,"module":2,"prompt":"What will be the output of the following code if the user enters `\"Python\"` and the number `3`?","code":"text = input(\"Enter something: \") # User enters Python\ntimes = input(\"Enter a number: \") # User enters 3\nprint(text * int(times))","options":["`PythonPython`","`Python * 3`","`Python3`","`PythonPythonPython`"],"answer":3,"correct_answer":"D","hint":"The string is repeated three times as specified","explanation":"The string is repeated three times as specified. Consider the following code: lst = [1, 2, 3, 4, 5, 6] del lst[2:-2]","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m2_294","question_number":294,"module":2,"prompt":"Will the `else` clause execute?","code":"for i in range(5):\n    if i == 2:\n        break\nelse:\n    print(\"Done\")","options":["Yes, because the loop completes its range.","Yes, because `i` reaches `2`.","No, because the loop is terminated by `break`.","No, because `i == 2` is a false condition."],"answer":2,"correct_answer":"C","hint":"The `break` statement prevents the `else` clause from executing.","explanation":"The `break` statement prevents the `else` clause from executing.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m2_295","question_number":295,"module":2,"prompt":"What will be the output of the following code?","code":"x = 7\ny = 10\nif x > y:\n    if x >= 5:\n        print(\"P\")\n    else:\n        print(\"Q\")\nelif x == y:\n    print(\"R\")\nelif y - x >= 3:\n    print(\"S\")\nelse:\n    print(\"T\")","options":["`P`","`R`","`T`","`S`"],"answer":3,"correct_answer":"D","hint":"The code prints \"S\" because y - x >= 3 is True (since y - x = 3).","explanation":"The code prints \"S\" because y - x >= 3 is True (since y - x = 3).","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m2_296","question_number":296,"module":2,"prompt":"Which of the following best describes the goals set by Guido van Rossum for Python in 1999?","code":"","options":["To make Python the fastest language available.","To make Python code as difficult as possible to understand.","To create a powerful, open-source language that is easy to use and understand.","To ensure Python remains a proprietary language controlled by a single entity."],"answer":2,"correct_answer":"C","hint":"The goals included creating a powerful, open-source, and easy-to-use language.","explanation":"The goals included creating a powerful, open-source, and easy-to-use language.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m2_297","question_number":297,"module":2,"prompt":"Why might a developer choose to use Cython over pure Python for a project?","code":"","options":["To simplify the syntax of their code.","To write code that can be directly compiled into Java.","To improve the performance of complex mathematical calculations.","To avoid using the \"C\" language altogether."],"answer":2,"correct_answer":"C","hint":"Cython is particularly useful for optimising performance in complex mathematical computations.","explanation":"Cython is particularly useful for optimising performance in complex mathematical computations.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m2_298","question_number":298,"module":2,"prompt":"What will be the output of the following code?","code":"i = 0\nwhile i < 5:\n    if i == 3:\n        break\n    print(i)\n    i += 1\nelse:\n    print(\"Loop completed\")","options":["0 1 2","0 1 2 3","0 1 2 Loop completed","Loop completed"],"answer":0,"correct_answer":"A","hint":"The loop breaks when `i == 3`, so \"Loop completed\" does not execute.","explanation":"The loop breaks when `i == 3`, so \"Loop completed\" does not execute.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m2_299","question_number":299,"module":2,"prompt":"Why might a development team opt to use Jython for a project?","code":"","options":["To take advantage of Python's integration with .NET.","To optimise performance on low-memory devices.","To enable the use of Python in web development exclusively.","To ensure compatibility with Java-based systems."],"answer":3,"correct_answer":"D","hint":"Jython is particularly useful for projects that need to work seamlessly within Java environments.","explanation":"Jython is particularly useful for projects that need to work seamlessly within Java environments.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m2_300","question_number":300,"module":2,"prompt":"What will be the output of the following code if the user inputs \"10\" for the first number and \"5\" for the second number?","code":"num1 = input(\"Enter first number: \") # User enters 10\nnum2 = input(\"Enter second number: \") # User enters 5\nprint(num1 + num2)","options":["15","Syntax Error","10 5","105"],"answer":3,"correct_answer":"D","hint":"The input values are treated as strings, so they are concatenated to produce \"105\"","explanation":"The input values are treated as strings, so they are concatenated to produce \"105\". Given the following operation: my_list = [\"apple\", \"banana\", \"cherry\"] new_list = my_list[:] del my_list[1]","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m2_301","question_number":301,"module":2,"prompt":"What is the output of this code?","code":"data = [1, 2, 3, 4]\nresult = [x + 1 for x in data if x % 2 == 0]\nprint(result)","options":["`[2, 3, 4, 5]`","`[3, 5]`","`[2, 4]`","`[1, 3, 5]`"],"answer":1,"correct_answer":"B","hint":"The comprehension adds `1` to even numbers, giving `[3, 5]`.","explanation":"The comprehension adds `1` to even numbers, giving `[3, 5]`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m2_302","question_number":302,"module":2,"prompt":"Given the following code, will the `else` clause execute?","code":"for i in range(5, 0, -1):\n    print(i)\n    if i == 2:\n        break\nelse:\n    print(\"Finished\")","options":["Yes, because the loop completes its range.","Yes, because i reaches 2.","No, because the loop is terminated by break.","No, because i == 2 is a false condition."],"answer":2,"correct_answer":"C","hint":"Loop `else` runs only when the loop finishes without hitting `break`.","explanation":"The loop hits `break` when `i == 2`, so the loop terminates early and the `else` block is skipped.","difficulty":"medium","source":"official-pcep-raw-txt","answers":[2]},{"id":"m2_303","question_number":303,"module":2,"prompt":"What will be printed by this `if-elif-else` chain?","code":"x = 7\nif x > 10:\n    print(\"Greater than 10\")\nelif x == 10:\n    print(\"Equal to 10\")\nelif x > 5:\n    print(\"Greater than 5\")\nelif x > 7:\n    print(\"Greater than 7\")\nelse:\n    print(\"Less than or equal to 5\")","options":["Greater than 10","Equal to 10","Greater than 5","Less than or equal to 5"],"answer":2,"correct_answer":"C","hint":"In an `if-elif-else` chain, Python executes only the first true condition.","explanation":"`x > 10` and `x == 10` are false. `x > 5` is true, so Python prints `Greater than 5` and stops checking later branches.","difficulty":"medium","source":"official-pcep-raw-txt","answers":[2]},{"id":"m2_304","question_number":304,"module":2,"prompt":"What is the output of this loop?","code":"for i in range(5):\n    if i == 2:\n        continue\n    print(i, end=\" \")\nelse:\n    print(\"Done\")","options":["0 1 2 Done","0 1 3 4 Done","0 1 3 4","0 1 2 3 4 Done"],"answer":1,"correct_answer":"B","hint":"`continue` skips only the current iteration, and loop `else` still runs when no `break` occurs.","explanation":"When `i == 2`, `continue` skips printing `2`. Values `0 1 3 4` are printed, and because no `break` is used, `else` prints `Done`.","difficulty":"medium","source":"official-pcep-raw-txt","answers":[1]},{"id":"m2_305","question_number":315,"module":2,"prompt":"What is printed?","code":"x = 7\nif x > 10:\n    print(\"A\")\nelif x > 5:\n    print(\"B\")\nelse:\n    print(\"C\")","options":["A","B","C","Nothing"],"answer":1,"correct_answer":"B","hint":"Only the first true branch in the chain runs.","explanation":"`x > 10` is false, `x > 5` is true, so Python prints `B`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m2_306","question_number":316,"module":2,"prompt":"What is the result of these expressions?","code":"print(5 and 3, 0 or 9)","options":["True True","3 9","5 0","True 9"],"answer":1,"correct_answer":"B","hint":"`and`/`or` return operands, not necessarily booleans.","explanation":"`5 and 3` returns `3`; `0 or 9` returns `9`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m2_307","question_number":317,"module":2,"prompt":"Which statement is true about `all([])` and `any([])`?","code":"print(all([]))\nprint(any([]))","options":["`all([])` is False and `any([])` is True","`all([])` is True and `any([])` is False","Both are False","Both are True"],"answer":1,"correct_answer":"B","hint":"Empty universal check vs existential check.","explanation":"`all([])` is vacuously true; `any([])` is false because no element is truthy.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m2_308","question_number":318,"module":2,"prompt":"Which expression is equivalent to `1 < x < 10`?","code":"# chained comparison\nresult = 1 < x < 10\n# equivalent:\n# (1 < x) and (x < 10)","options":["(1 < x) or (x < 10)","(1 < x) and (x < 10)","(1 <= x) and (x <= 10)","(x > 1) != (x < 10)"],"answer":1,"correct_answer":"B","hint":"Chained comparisons combine with logical AND.","explanation":"`1 < x < 10` means both conditions must hold: `1 < x` and `x < 10`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m2_309","question_number":319,"module":2,"prompt":"After this loop, what is the value of `i`?","code":"for i in range(3):\n    pass\nprint(i)","options":["0","1","2","NameError"],"answer":2,"correct_answer":"C","hint":"Loop variables remain in scope after the loop.","explanation":"The last value assigned in `range(3)` is `2`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[2]},{"id":"m2_310","question_number":320,"module":2,"prompt":"How many times is `#` printed?","code":"count = 0\nwhile count < 3:\n    print(\"#\")\n    count += 1","options":["2","3","4","Infinite loop"],"answer":1,"correct_answer":"B","hint":"Track loop condition and increment carefully.","explanation":"`count` goes 0 -> 1 -> 2, and loop runs exactly three times.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m2_311","question_number":321,"module":2,"prompt":"Which statement about `range(5)` is correct?","code":"print(list(range(5)))","options":["It generates 1 through 5","It generates 0 through 5","It generates 0 through 4","It generates a list immediately"],"answer":2,"correct_answer":"C","hint":"Stop argument is excluded.","explanation":"`range(5)` produces values `0,1,2,3,4`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[2]},{"id":"m2_312","question_number":322,"module":2,"prompt":"Control flow facts: which are true? (Select two answers)","code":"","options":["`break` exits only the innermost loop.","`continue` terminates the whole loop immediately.","A loop `else` block runs only if the loop was not terminated by `break`.","`if` requires parentheses around conditions in Python."],"answer":0,"correct_answer":"A, C","hint":"Differentiate `break` vs `continue`; Python syntax is indentation-based.","explanation":"`break` exits the current loop level; `continue` skips an iteration. Loop `else` executes only when no `break` occurs.","difficulty":"medium","source":"curated-enhanced-2026","answers":[0,2]},{"id":"m2_340","question_number":342,"module":2,"prompt":"Which operator statements are true? (Select two answers)","code":"","options":["`**` is right-associative (`2 ** 3 ** 2` equals `2 ** (3 ** 2)`).","Addition has higher precedence than multiplication.","Using `/` with zero as right operand raises `ZeroDivisionError`.","`and` has lower precedence than `or`."],"answers":[0,2],"answer":0,"correct_answer":"A, C","hint":"Remember precedence and error behavior for zero division.","explanation":"Exponentiation is right-associative, and division by zero raises `ZeroDivisionError`. Multiplication binds tighter than addition, and `and` binds tighter than `or`.","difficulty":"medium","source":"pcep-raw-multiselect-2026"},{"id":"m2_341","question_number":343,"module":2,"prompt":"What is true about loop `else` in Python? (Select two answers)","code":"for i in range(3):\n    if i == 1:\n        continue\nelse:\n    print(\"loop else runs\")","options":["Loop `else` runs if the loop finishes without `break`.","`continue` skips one iteration but does not disable loop `else`.","Loop `else` only runs when the loop body executes at least once.","`break` allows loop `else` to run normally."],"answers":[0,1],"answer":0,"correct_answer":"A, B","hint":"Focus on the role of `break` versus `continue`.","explanation":"Loop `else` is skipped only when `break` executes. `continue` does not cancel loop `else`.","difficulty":"medium","source":"pcep-raw-multiselect-2026"}],"module3":[{"id":"m3_250","question_number":250,"module":3,"prompt":"Consider the following dictionary. How would you modify the value associated with the key `'c'` to 4?","code":"d = {'a': 1, 'b': 2, 'c': 3}","options":["`d['c'] = 4`","`d.update('c': 4)`","`d.append('c': 4)`","`d.replace('c', 4)`"],"answer":0,"correct_answer":"A","hint":"This directly modifies the value associated with the key `'c'`.","explanation":"This directly modifies the value associated with the key `'c'`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m3_251","question_number":251,"module":3,"prompt":"What is the value of `y` in binary?","code":"x = 29\ny = x >> 2\nprint(f\"{y:08b}\")","options":["`00001101`","`00000111`","`00001110`","`000011`"],"answer":1,"correct_answer":"B","hint":"Shifting `29` two bits to the right yields `00000111`, which is `7` in decimal.","explanation":"Shifting `29` two bits to the right yields `00000111`, which is `7` in decimal.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m3_252","question_number":252,"module":3,"prompt":"Is there a difference in output between using `my_dict['key']` and `my_dict.get('key')` when the key does not exist?","code":"my_dict = {'name': 'Alice'}\n# my_dict['key'] -> KeyError if missing\nprint(my_dict.get('key'))  # None if missing","options":["Yes, `my_dict['key']` returns `None`, while `my_dict.get('key')` raises a `KeyError`.","Yes, `my_dict['key']` raises a `KeyError`, while `my_dict.get('key')` returns `None`.","No, both return `None` if the key does not exist.","No, both raise a `KeyError` if the key does not exist."],"answer":1,"correct_answer":"B","hint":"`my_dict['key']` raises a `KeyError` when the key is absent, while `my_dict.get('key')` safely returns `None`.","explanation":"`my_dict['key']` raises a `KeyError` when the key is absent, while `my_dict.get('key')` safely returns `None`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m3_253","question_number":253,"module":3,"prompt":"Given the tuple `t = (1, 2, 3, [4, 5])`, what will happen if you try to modify the list inside the tuple?","code":"t[3][0] = 10","options":["A `TypeError` will be raised due to tuple immutability.","The tuple will remain unchanged, and the modification will be ignored.","The list will be successfully modified.","The tuple will become corrupted and unusable."],"answer":2,"correct_answer":"C","hint":"The list inside the tuple is mutable, so `t[3][0]` can be changed.","explanation":"The list inside the tuple is mutable, so `t[3][0]` can be changed.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m3_254","question_number":254,"module":3,"prompt":"Given the string literal `\"Python is fun!\"`, which code will replace all spaces with underscores?","code":"text = \"Python is fun!\"\nprint(text.replace(' ', '_'))","options":["`\"Python_is_fun!\"`","`replace(\"Python is fun!\", \" \", \"_\")`","`\"Python_is_fun!\" * 3`","`\"Python is fun!\".replace(' ', '_')`"],"answer":3,"correct_answer":"D","hint":"The `replace()` method replaces spaces with underscores in the string.","explanation":"The `replace()` method replaces spaces with underscores in the string.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m3_255","question_number":255,"module":3,"prompt":"What are the final values of `l1` and `l2`?","code":"l1 = [1, 2, 3, 4]\nl2 = l1\ndel l2[0]\nprint(l1, l2)","options":["`[2, 3, 4]` and `[2, 3, 4]`","`[1, 2, 3, 4]` and `[1, 2, 3, 4]`","`[2, 3, 4]` and `[1, 2, 3, 4]`","`[1, 2, 3]` and `[2, 3, 4]`"],"answer":0,"correct_answer":"A","hint":"Both `l1` and `l2` reference the same list, so modifications to one affect both.","explanation":"Both `l1` and `l2` reference the same list, so modifications to one affect both.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m3_256","question_number":256,"module":3,"prompt":"What is an instruction list (IL) in the context of machine language?","code":"","options":["A list of human languages the computer can interpret.","A set of complex algorithms a computer uses to solve problems.","A complete set of simple commands that a computer can recognise and execute.","A list of natural languages that can be used to program a computer."],"answer":2,"correct_answer":"C","hint":"An instruction list (IL) is a set of simple commands that a computer can recognise and execute.","explanation":"An instruction list (IL) is a set of simple commands that a computer can recognise and execute.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m3_257","question_number":257,"module":3,"prompt":"What is the final value of `my_list`?","code":"my_list = [1, 2, 3, 4, 5]\nmy_list[2:4] = [9, 10]\nprint(my_list)","options":["`[1, 2, 9, 4, 5]`","`[1, 2, 3, 9, 10, 5]`","`[1, 9, 10, 4, 5]`","`[1, 2, 9, 10, 5]`"],"answer":3,"correct_answer":"D","hint":"The slice `[2:4]` replaces `[3, 4]` with `[9, 10]`, resulting in `[1, 2, 9, 10, 5]`.","explanation":"The slice `[2:4]` replaces `[3, 4]` with `[9, 10]`, resulting in `[1, 2, 9, 10, 5]`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m3_258","question_number":258,"module":3,"prompt":"Consider the following code snippet. What is the final value of `x`?","code":"x = 10\nx += 5\nx -= 3 * 2","options":["`7`","`15`","`10`","`9`"],"answer":3,"correct_answer":"D","hint":"The final calculation is `15 - 6 = 9`.","explanation":"The final calculation is `15 - 6 = 9`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m3_259","question_number":259,"module":3,"prompt":"How does Python treat Boolean values in arithmetic operations?","code":"","options":["`True` is treated as `0` and `False` as `1`.","Both `True` and `False` are treated as `1`.","`True` is treated as `1` and `False` as `0`.","`True` and `False` cannot be used in arithmetic operations."],"answer":2,"correct_answer":"C","hint":"`True` equals `1`, and `False` equals `0` in arithmetic contexts.","explanation":"`True` equals `1`, and `False` equals `0` in arithmetic contexts.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m3_260","question_number":260,"module":3,"prompt":"Which expression correctly calculates how many full groups of 4 can be made from 17 items, and how many are left over?","code":"","options":["`17 % 4, 17 // 4`","`17 / 4, 17 * 4`","`17 * 4, 17 - 4`","`17 // 4, 17 % 4`"],"answer":3,"correct_answer":"D","hint":"`17 // 4 = 4` full groups, `17 % 4 = 1` item left over.","explanation":"`17 // 4 = 4` full groups, `17 % 4 = 1` item left over.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m3_261","question_number":261,"module":3,"prompt":"What is the difference between a variable's identifier and its value?","code":"","options":["The identifier is the memory location, and the value is its address.","The identifier is the name of the variable, and the value is what it stores.","The identifier is a constant, and the value is mutable.","The identifier is the data type, and the value is the data stored."],"answer":1,"correct_answer":"B","hint":"The identifier is the name, and the value is what the variable holds.","explanation":"The identifier is the name, and the value is what the variable holds.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m3_262","question_number":262,"module":3,"prompt":"What will `transposed` look like after execution?","code":"matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\ntransposed = [[row[i] for row in matrix] for i in range(len(matrix[0]))]\nprint(transposed)","options":["`[[3, 6, 9], [2, 5, 8], [1, 4, 7]]`","`[[1, 2, 3], [4, 5, 6], [7, 8, 9]]`","`[[7, 8, 9], [4, 5, 6], [1, 2, 3]]`","`[[1, 4, 7], [2, 5, 8], [3, 6, 9]]`"],"answer":3,"correct_answer":"D","hint":"The list comprehension transposes the matrix, swapping rows with columns.","explanation":"The list comprehension transposes the matrix, swapping rows with columns.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m3_263","question_number":263,"module":3,"prompt":"What will happen if you try to modify a dictionary by adding or removing key / value pairs while iterating over it?","code":"","options":["The dictionary will be modified as expected.","A `KeyError` will be raised.","The modifications will be ignored.","A `RuntimeError` will be raised."],"answer":3,"correct_answer":"D","hint":"A `RuntimeError` is raised when the size of the dictionary changes during iteration.","explanation":"A `RuntimeError` is raised when the size of the dictionary changes during iteration.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m3_264","question_number":264,"module":3,"prompt":"What will be the value of `x` after the following code is executed?","code":"x = 3\nx += 10 // 3 * 2 ** 2","options":["`21`","`17`","`19`","`15`"],"answer":3,"correct_answer":"D","hint":"The correct value of x after the code execution is 15","explanation":"The correct value of x after the code execution is 15. Here's the breakdown: 10 // 3 performs integer division, resulting in 3. 2 ** 2 calculates the power, resulting in 4. The multiplication 3 * 4 gives 12. Finally, x += 12 adds 12 to the initial value of x, which was 3, resulting in 15.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m3_265","question_number":265,"module":3,"prompt":"Which of the following sentences are true? (Select two answers)","code":"nums = [1, 2, 3]\nvals = nums[-1:-2]","options":["nums and vals are of the same length.","nums and vals are two different lists.","vals is longer than nums.","nums is longer than vals."],"answers":[1,3],"answer":1,"correct_answer":"B, D","hint":"A slice with start > stop and default positive step returns an empty list.","explanation":"nums[-1:-2] returns [] here, so vals is a different list and nums is longer than vals.","difficulty":"medium","source":"official-pcep-ocr-multi"},{"id":"m3_266","question_number":266,"module":3,"prompt":"Take a look at the snippet, and choose the true statements. (Select two answers)","code":"nums = [1, 2, 3]\nvals = nums\ndel vals[1:2]","options":["nums and vals refer to the same list.","nums is longer than vals.","nums is replicated and assigned to vals.","nums and vals are of the same length."],"answers":[0,3],"answer":0,"correct_answer":"A, D","hint":"Simple assignment of a list copies the reference, not the list content.","explanation":"vals points to the same list as nums. Deleting through vals mutates the shared list, so both names still reference lists of equal length.","difficulty":"medium","source":"official-pcep-ocr-multi"},{"id":"m3_267","question_number":305,"module":3,"prompt":"Why does this code raise a `KeyError`, and how can you avoid it?","code":"my_dict = {\"name\": \"Alice\", \"age\": 25}\nprint(my_dict[\"address\"])","options":["The key `address` does not exist; use `my_dict.get(\"address\")`.","The dictionary is missing; create it first.","The key `address` is protected; rename the key.","The dictionary is immutable; convert it to a list."],"answer":0,"correct_answer":"A","hint":"Bracket access on dictionaries fails for missing keys.","explanation":"`my_dict[\"address\"]` raises `KeyError` because that key is missing. `my_dict.get(\"address\")` returns `None` (or a default value) instead of raising.","difficulty":"medium","source":"official-pcep-raw-txt","answers":[0]},{"id":"m3_268","question_number":306,"module":3,"prompt":"What is the final state of `lst` after these list operations?","code":"lst = [10, 20, 30]\nlst.reverse()\nlst.append(40)\nlst.sort()","options":["[40, 30, 20, 10]","[10, 20, 30, 40]","[40, 30, 20]","[30, 20, 10, 40]"],"answer":1,"correct_answer":"B","hint":"`sort()` at the end determines the final order.","explanation":"After reverse and append, the list is `[30, 20, 10, 40]`. Final `sort()` rearranges it in ascending order: `[10, 20, 30, 40]`.","difficulty":"medium","source":"official-pcep-raw-txt","answers":[1]},{"id":"m3_269","question_number":323,"module":3,"prompt":"What happens here?","code":"s = \"python\"\ns[0] = \"P\"","options":["It changes `s` to `Python`","It raises `TypeError`","It raises `ValueError`","It creates a new string automatically"],"answer":1,"correct_answer":"B","hint":"Strings are immutable.","explanation":"String items cannot be assigned in place; attempting to do so raises `TypeError`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m3_270","question_number":324,"module":3,"prompt":"What is true when a substring is missing?","code":"","options":["`s.find(x)` raises `ValueError`","`s.index(x)` returns `-1`","`s.find(x)` returns `-1`, `s.index(x)` raises `ValueError`","Both return `None`"],"answer":2,"correct_answer":"C","hint":"`find` is safe-return; `index` is exception-raising.","explanation":"`find` returns `-1` when not found, while `index` raises `ValueError`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[2]},{"id":"m3_271","question_number":325,"module":3,"prompt":"What is the result?","code":"a = [1, 2]\na.append([3, 4])\nprint(a)","options":["[1, 2, 3, 4]","[1, 2, [3, 4]]","[[1, 2], [3, 4]]","[3, 4]"],"answer":1,"correct_answer":"B","hint":"`append` adds one element; `extend` adds each element.","explanation":"`append([3,4])` adds the list as a single item, producing `[1, 2, [3, 4]]`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m3_272","question_number":326,"module":3,"prompt":"What happens after these operations?","code":"a = [1, 2, 3]\nb = a\nb[0] = 99\nprint(a)","options":["[1, 2, 3]","[99, 2, 3]","[99]","TypeError"],"answer":1,"correct_answer":"B","hint":"Assignment copies references for lists.","explanation":"`a` and `b` point to the same list object, so changing `b` also changes `a`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m3_273","question_number":327,"module":3,"prompt":"How do you create a one-element tuple containing `1`?","code":"single = (1,)\nprint(type(single).__name__)","options":["(1)","[1]","(1,)","{1}"],"answer":2,"correct_answer":"C","hint":"A trailing comma distinguishes tuple from grouped expression.","explanation":"`(1,)` is a tuple; `(1)` is just an integer in parentheses.","difficulty":"medium","source":"curated-enhanced-2026","answers":[2]},{"id":"m3_274","question_number":328,"module":3,"prompt":"For dictionaries, what does `\"x\" in d` check?","code":"d = {\"x\": 1, \"y\": 2}\nprint(\"x\" in d)","options":["Values only","Keys only","Both keys and values","Neither"],"answer":1,"correct_answer":"B","hint":"Dictionary membership defaults to keys.","explanation":"`in` checks dictionary keys. Use `d.values()` to test values.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m3_275","question_number":329,"module":3,"prompt":"What is returned for a missing key with `d.get(\"z\")`?","code":"d = {\"a\": 1}\nprint(d.get(\"z\"))","options":["KeyError","False","None","0"],"answer":2,"correct_answer":"C","hint":"`get` is safe for missing keys.","explanation":"`dict.get` returns `None` by default when the key does not exist.","difficulty":"medium","source":"curated-enhanced-2026","answers":[2]},{"id":"m3_276","question_number":330,"module":3,"prompt":"What is the pitfall in this initialization?","code":"grid = [[0] * 3] * 3\ngrid[0][0] = 1\nprint(grid)","options":["Only first row changes","All rows change in first column","SyntaxError","Rows become tuples"],"answer":1,"correct_answer":"B","hint":"List multiplication copies references of inner lists.","explanation":"All rows reference the same inner list, so updating one row affects all rows.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m3_277","question_number":331,"module":3,"prompt":"Which tuple statements are true? (Select two answers)","code":"","options":["Tuples can be indexed and sliced.","Tuples support `.append()` for growth.","A tuple can contain mutable objects (e.g., lists).","Tuples are identical to lists."],"answer":0,"correct_answer":"A, C","hint":"Tuples are immutable containers, but elements can be mutable objects.","explanation":"Tuples support indexing/slicing and can hold mutable elements, but tuple length/content references are immutable.","difficulty":"medium","source":"curated-enhanced-2026","answers":[0,2]},{"id":"m3_340","question_number":344,"module":3,"prompt":"Take a look at the snippet and choose the true statements. (Select two answers)","code":"nums = [1, 2, 3]\nvals = nums\ndel vals[1:2]","options":["`nums` and `vals` refer to the same list object.","After deletion, `nums` becomes `[1, 3]`.","`vals` becomes an independent copy after deletion.","`nums` keeps length 3 because only `vals` changed."],"answers":[0,1],"answer":0,"correct_answer":"A, B","hint":"`vals = nums` binds a second reference to the same list.","explanation":"Both names point to one list. Deleting through `vals` mutates that shared list, so `nums` also becomes `[1, 3]`.","difficulty":"medium","source":"pcep-raw-multiselect-2026"},{"id":"m3_341","question_number":345,"module":3,"prompt":"Which slicing statements are true? (Select two answers)","code":"","options":["`my_list[-3:-2]` returns one element when bounds are valid.","Slice stop index is inclusive.","`my_list[:]` creates a shallow copy of the list.","Out-of-range slicing always raises `IndexError`."],"answers":[0,2],"answer":0,"correct_answer":"A, C","hint":"Remember: slice stop is excluded and slicing is tolerant.","explanation":"Slice stop is exclusive, and full slicing creates a shallow copy. Out-of-range slicing typically returns a shorter/empty slice, not `IndexError`.","difficulty":"medium","source":"pcep-raw-multiselect-2026"}],"module4":[{"id":"m4_213","question_number":213,"module":4,"prompt":"What will happen if you call `add_numbers(5)` with the function defined as below?","code":"def add_numbers(a, b=10):\n    return a + b","options":["It will return `15`.","It will raise a `TypeError` due to missing arguments.","It will return `5`.","It will raise a `SyntaxError`."],"answer":0,"correct_answer":"A","hint":"The function will use the default value of `b=10` when `b` is not provided, returning `15`.","explanation":"The function will use the default value of `b=10` when `b` is not provided, returning `15`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m4_214","question_number":214,"module":4,"prompt":"Which of the following code snippets will raise a TypeError?","code":"# Evaluate each snippet independently and identify which one raises TypeError.","options":["len(5)","\"hello\" + \"5\"","[1, 2, 3] + [4, 5, 6]","dict([('a', 1), ('b', 2)])"],"answer":0,"correct_answer":"A","hint":"A TypeError is raised because the len() function expects a collection type (like a list, tuple, or string), but an integer (5) is provided i","explanation":"A TypeError is raised because the len() function expects a collection type (like a list, tuple, or string), but an integer (5) is provided instead.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m4_215","question_number":215,"module":4,"prompt":"Given the function below, what will be the output if you pass a non-numeric value to `square_root`?","code":"def square_root(x):\n    return x ** 0.5","options":["A `SyntaxError` will be raised.","A `ValueError` will be raised.","A `ZeroDivisionError` will be raised.","A `TypeError` will be raised."],"answer":3,"correct_answer":"D","hint":"Passing a non-numeric value raises a `TypeError`","explanation":"Passing a non-numeric value raises a `TypeError`. Adding a `try-except` block will handle this error gracefully.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m4_216","question_number":216,"module":4,"prompt":"What will be the output of the following code?","code":"try:\n    result = 10 / 0\nexcept ZeroDivisionError:\n    result = \"Infinity\"\nprint(result)","options":["`Infinity`.","`0`.","`None`.","`ZeroDivisionError`."],"answer":0,"correct_answer":"A","hint":"The `except` block catches the `ZeroDivisionError` and assigns `\"Infinity\"` to `result`.","explanation":"The `except` block catches the `ZeroDivisionError` and assigns `\"Infinity\"` to `result`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m4_217","question_number":217,"module":4,"prompt":"What will be the output of the following code if the user inputs a non-integer value?","code":"try:\n    num = int(input(\"Enter a number: \"))\n    print(10 / num)\nexcept ValueError:\n    print(\"Invalid input!\")\nexcept ZeroDivisionError:\n    print(\"Cannot divide by zero!\")\nexcept:\n    print(\"Some other error occurred!\")","options":["The program crashes with a `ValueError`.","\"Cannot divide by zero!\".","\"Some other error occurred!\".","\"Invalid input!\"."],"answer":3,"correct_answer":"D","hint":"The `ValueError` is caught by the first `except` block when the input is not an integer.","explanation":"The `ValueError` is caught by the first `except` block when the input is not an integer.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m4_218","question_number":218,"module":4,"prompt":"What will be the output of the following code, and what does it demonstrate about variable scope?","code":"var = 10\ndef multiply_by_var(x):\n    var = 5\n    return x * var\nprint(multiply_by_var(3))\nprint(var)","options":["`30`, `5` - Demonstrates variable shadowing.","`15`, `5` - Demonstrates local variable overriding global scope.","`30`, `10` - Demonstrates global variable usage within functions.","`15`, `10` - Demonstrates global and local variable scope."],"answer":3,"correct_answer":"D","hint":"The function uses the local `var`, and the global `var` remains unchanged.","explanation":"The function uses the local `var`, and the global `var` remains unchanged.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m4_219","question_number":219,"module":4,"prompt":"Why does the following code raise a `TypeError`, and how can you debug it?","code":"def add(a, b):\n    return a + b\nprint(add(10, '5'))","options":["The function tries to add an integer and a string; debug by converting the string to an integer.","The function tries to add two integers; debug by using `str` for both.","The function tries to add a string and a float; debug by converting the float to a string.","The function tries to concatenate two strings; debug by converting the integer to a string."],"answer":0,"correct_answer":"A","hint":"Adding an integer and a string raises a `TypeError`","explanation":"Adding an integer and a string raises a `TypeError`. Converting the string to an integer resolves the issue.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m4_220","question_number":220,"module":4,"prompt":"What happens if you call the following function without passing any arguments?","code":"def display_name(first_name, last_name=\"Smith\"):\n    print(first_name, last_name)","options":["It prints \"Smith Smith\".","It raises a `TypeError` for missing the `first_name` argument.","It prints \"None Smith\".","It raises a `SyntaxError` for not passing arguments."],"answer":1,"correct_answer":"B","hint":"A `TypeError` occurs because `first_name` is required and not provided.","explanation":"A `TypeError` occurs because `first_name` is required and not provided.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m4_221","question_number":221,"module":4,"prompt":"What will be the output of the following code?","code":"def greet():\n    return \"Hello\"\n    print(\"Goodbye\")\nprint(greet())","options":["\"Hello\" followed by \"Goodbye\"","\"Goodbye\"","\"Hello\"","No output due to a syntax error"],"answer":2,"correct_answer":"C","hint":"The function returns \"Hello\" and exits before reaching `print(\"Goodbye\")`.","explanation":"The function returns \"Hello\" and exits before reaching `print(\"Goodbye\")`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m4_222","question_number":222,"module":4,"prompt":"Given the list `l = [10, 20, 30]`, which function creates a dictionary with indices as keys and list elements as values?","code":"l = [10, 20, 30]\n# choose function that returns {0: 10, 1: 20, 2: 30}","options":["`def create_dict(l): return {i: l[i] for i in range(len(l))}`","`def create_dict(l): return {l[i]: i for i in range(len(l))}`","`def create_dict(l): return dict(zip(l))`","`def create_dict(l): return {i: l[i] for i in l}`"],"answer":0,"correct_answer":"A","hint":"This creates a dictionary where the index of each list item is the key, and the item is the value.","explanation":"This creates a dictionary where the index of each list item is the key, and the item is the value.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m4_223","question_number":223,"module":4,"prompt":"Which of the following describes how the `input()` function affects the flow of a Python program?","code":"name = input('Enter your name: ')\nprint('Hello', name)","options":["It causes the program to execute faster by bypassing other inputs.","It pauses program execution until the user provides input.","It automatically converts all inputs to integers.","It allows the program to execute concurrently while waiting for input."],"answer":1,"correct_answer":"B","hint":"The `input()` function halts the program until the user responds.","explanation":"The `input()` function halts the program until the user responds.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m4_224","question_number":224,"module":4,"prompt":"Why does the following code raise an error, and how can it be corrected?","code":"def subtract(a, b=5):\n    return a - b\nprint(subtract(a=10, 2))","options":["The code raises a `ValueError`; correct by removing `b=5`.","The code raises a `TypeError`; correct by changing `a=10` to `10`.","The code raises a `TypeError`; correct by removing `2`.","The code raises a `SyntaxError`; correct by changing `print(subtract(a=10, 2))` to `print(subtract(10, b=2))`."],"answer":3,"correct_answer":"D","hint":"The code has a syntax error due to a positional argument following a keyword argument","explanation":"The code has a syntax error due to a positional argument following a keyword argument. Fixing the argument order resolves the issue.","difficulty":"medium","source":"official-pcep-rtfd","answers":[3]},{"id":"m4_225","question_number":225,"module":4,"prompt":"What will be the output of `print_subtract(b=10, a=5)` given the function definition below?","code":"def print_subtract(a, b):\n    print(a - b)","options":["`5`","`-5`","`15`","`-10`"],"answer":1,"correct_answer":"B","hint":"The function subtracts `b` from `a`, resulting in `5 - 10 = -5`.","explanation":"The function subtracts `b` from `a`, resulting in `5 - 10 = -5`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m4_226","question_number":226,"module":4,"prompt":"Given the following function, what will be the output of `factorial(4)`?","code":"def factorial(n):\n    if n == 1:\n        return 1\n    else:\n        return n * factorial(n - 1)","options":["`24`","`16`","`10`","`4`"],"answer":0,"correct_answer":"A","hint":"`factorial(4)` computes `4 * 3 * 2 * 1`, which is `24`.","explanation":"`factorial(4)` computes `4 * 3 * 2 * 1`, which is `24`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m4_227","question_number":227,"module":4,"prompt":"Why does the following code snippet raise an error, and how can you correct it?","code":"t = (1, 2, 3)\nt[1] = 4","options":["Tuples are immutable; correct by converting to a list before modification.","Tuples require the use of `del` for changes; correct by using `del t[1]`.","Tuples only accept strings; correct by using string values.","The index is out of range; correct by using a valid index."],"answer":0,"correct_answer":"A","hint":"Tuples cannot be modified directly; converting to a list allows for modification.","explanation":"Tuples cannot be modified directly; converting to a list allows for modification.","difficulty":"medium","source":"official-pcep-rtfd","answers":[0]},{"id":"m4_228","question_number":228,"module":4,"prompt":"What potential issue exists in the following code, and how should it be corrected?","code":"# This line prints a greeting\nprint(\"Hello world!\") # Greeting print function","options":["Comments should not be placed on the same line as code.","The comment after the print function is redundant.","Comments should be enclosed in triple quotes.","The code lacks proper indentation."],"answer":1,"correct_answer":"B","hint":"The comment after the print function adds no value and can confuse.","explanation":"The comment after the print function adds no value and can confuse.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m4_229","question_number":229,"module":4,"prompt":"What will be the output of the following code?","code":"x = 10\ndef outer():\n    x = 5\n    def inner():\n        global x\n        x = 2\n        return x\n    inner()\n    return x\nprint(outer())\nprint(x)","options":["`5` and `10`","`5` and `2`","`2` and `5`","`10` and `2`"],"answer":1,"correct_answer":"B","hint":"The local `x` in `outer` remains `5`, but the global `x` is changed to `2` by `inner`.","explanation":"The local `x` in `outer` remains `5`, but the global `x` is changed to `2` by `inner`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m4_230","question_number":230,"module":4,"prompt":"Given the following code, what will be printed?","code":"def mystery(x, y=[]):\n    y.append(x)\n    return y\nprint(mystery(1))\nprint(mystery(2, []))\nprint(mystery(3))","options":["`[1], [2], [3]`","`[1], [2], [1, 3]`","`[1], [2], [1, 2, 3]`","`TypeError`"],"answer":1,"correct_answer":"B","hint":"The list `y` keeps the value from the first call, so `mystery(3)` adds to `[1]`.","explanation":"The list `y` keeps the value from the first call, so `mystery(3)` adds to `[1]`.","difficulty":"medium","source":"official-pcep-rtfd","answers":[1]},{"id":"m4_231","question_number":231,"module":4,"prompt":"Which of the following correctly describes a keyword argument in Python?","code":"def show(a, b):\n    print(a, b)\n\nshow(b=10, a=5)  # keyword arguments","options":["Its meaning is determined by its position in the function call.","It is always passed as the first argument to a function.","Its meaning is specified by an identifier, not its position.","It cannot be used with built-in functions."],"answer":2,"correct_answer":"C","hint":"Keyword arguments are identified by name rather than position.","explanation":"Keyword arguments are identified by name rather than position.","difficulty":"medium","source":"official-pcep-rtfd","answers":[2]},{"id":"m4_232","question_number":232,"module":4,"prompt":"A function defined as below: (Select two answers)","code":"def function(x=0):\n    return x","options":["must be invoked with exactly one argument.","may be invoked with exactly one argument.","must be invoked without any argument.","may be invoked without any argument."],"answers":[1,3],"answer":1,"correct_answer":"B, D","hint":"Default parameters make arguments optional.","explanation":"Because x has a default value, the function can be called with one argument or with none.","difficulty":"medium","source":"official-pcep-ocr-multi"},{"id":"m4_233","question_number":233,"module":4,"prompt":"Select the true statements about the try-except block below. (Select two answers)","code":"try:\n    # some code\n    pass\nexcept:\n    # some code\n    pass","options":["If there is a syntax error in code in the try block, except will not handle it and a SyntaxError will be raised.","The code in except executes if the code in try raises an exception at runtime.","except executes even if no exception occurs in try.","A bare except can never catch runtime exceptions."],"answers":[0,1],"answer":0,"correct_answer":"A, B","hint":"Runtime exceptions are catchable; syntax errors are compile-time issues.","explanation":"A runtime exception in try can flow into except. Syntax errors are detected before normal try/except runtime handling.","difficulty":"medium","source":"official-pcep-ocr-multi"},{"id":"m4_234","question_number":332,"module":4,"prompt":"What does a function return if there is no explicit `return`?","code":"def f():\n    pass\n\nprint(f())","options":["0","False","None","Empty string"],"answer":2,"correct_answer":"C","hint":"Python has an implicit return value.","explanation":"Functions without an explicit `return` return `None`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[2]},{"id":"m4_235","question_number":333,"module":4,"prompt":"What happens if a required parameter is missing?","code":"def greet(name):\n    return \"Hi \" + name\n\nprint(greet())","options":["Prints `Hi`","TypeError","ValueError","NameError"],"answer":1,"correct_answer":"B","hint":"Required positional arguments must be provided.","explanation":"Calling `greet()` without `name` raises `TypeError` for missing required positional argument.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m4_236","question_number":334,"module":4,"prompt":"What is true about keyword arguments?","code":"","options":["Meaning is based on position only","Meaning is based on parameter name","They are allowed only in built-ins","They must come before positional args"],"answer":1,"correct_answer":"B","hint":"Keywords bind by parameter identifier.","explanation":"Keyword arguments are matched by parameter name, not by position.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m4_237","question_number":335,"module":4,"prompt":"What are the types of `args` and `kwargs`?","code":"def g(*args, **kwargs):\n    print(type(args).__name__, type(kwargs).__name__)\n\ng(1, 2, a=3)","options":["list and list","tuple and dict","dict and tuple","set and dict"],"answer":1,"correct_answer":"B","hint":"`*args` packs positional args; `**kwargs` packs keyword args.","explanation":"`*args` becomes a tuple, and `**kwargs` becomes a dictionary.","difficulty":"medium","source":"curated-enhanced-2026","answers":[1]},{"id":"m4_238","question_number":336,"module":4,"prompt":"Exception handling order: which are true? (Select two answers)","code":"","options":["Specific exceptions should be placed before broad exceptions like `Exception`.","`except Exception` should always be first.","`finally` runs even when an exception is raised and handled.","A handled exception prevents `finally` from running."],"answer":0,"correct_answer":"A, C","hint":"Think matching order and guaranteed cleanup.","explanation":"Exception handlers are checked top-down, so specific ones must come first. `finally` runs regardless of whether an exception occurred.","difficulty":"medium","source":"curated-enhanced-2026","answers":[0,2]},{"id":"m4_239","question_number":337,"module":4,"prompt":"What will this print?","code":"def f():\n    try:\n        return 1\n    finally:\n        print(\"cleanup\")\n\nprint(f())","options":["1 only","cleanup only","cleanup then 1","TypeError"],"answer":2,"correct_answer":"C","hint":"`finally` executes before function exits.","explanation":"`finally` prints `cleanup`, then the pending return value `1` is printed.","difficulty":"medium","source":"curated-enhanced-2026","answers":[2]},{"id":"m4_240","question_number":338,"module":4,"prompt":"What is the output of `factorial(4)`?","code":"def factorial(n):\n    if n == 1:\n        return 1\n    return n * factorial(n - 1)\n\nprint(factorial(4))","options":["10","16","24","4"],"answer":2,"correct_answer":"C","hint":"Recursion multiplies descending integers to base case.","explanation":"`4 * 3 * 2 * 1 = 24`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[2]},{"id":"m4_241","question_number":339,"module":4,"prompt":"A function `def f(x=0): return x` can be called how? (Select two answers)","code":"def f(x=0):\n    return x\n\nprint(f())\nprint(f(5))","options":["With exactly one argument.","With no arguments.","Only with keyword arguments.","Never without arguments."],"answer":0,"correct_answer":"A, B","hint":"Default parameters make the argument optional.","explanation":"Because `x` has a default value, you can call `f(5)` or simply `f()`.","difficulty":"medium","source":"curated-enhanced-2026","answers":[0,1]},{"id":"m4_340","question_number":346,"module":4,"prompt":"Which statements about `return` are true? (Select two answers)","code":"def demo(v=0):\n    if v > 0:\n        return v\n    return 0","options":["`return` may terminate function execution immediately.","`return` can pass a value back to the caller.","`return` restarts function execution from the top.","A function can contain only one `return` statement."],"answers":[0,1],"answer":0,"correct_answer":"A, B","hint":"Think about control flow and value passing.","explanation":"`return` exits the current function call and optionally provides a value. Functions may have multiple return points.","difficulty":"medium","source":"pcep-raw-multiselect-2026"},{"id":"m4_341","question_number":347,"module":4,"prompt":"Which statements about `None` are true? (Select two answers)","code":"value = None\nprint(value is None)\nprint(value == None)\n# print(value + 1)  # TypeError","options":["`None` can be assigned to variables.","`None` can be compared with other values.","`None + 1` is valid arithmetic.","`None` can only be used inside functions."],"answers":[0,1],"answer":0,"correct_answer":"A, B","hint":"`None` is a regular singleton object in Python.","explanation":"`None` is assignable and comparable, but arithmetic with `None` raises `TypeError`.","difficulty":"medium","source":"pcep-raw-multiselect-2026"}]};


        // Event Listeners for Setup
        document.getElementById('questionCountSlider').addEventListener('input', (e) => {
            const value = parseInt(e.target.value);
            state.questionCount = value;
            document.getElementById('questionCountValue').textContent = value;
            updateEstimatedTime();
        });

        document.getElementById('enableTimer').addEventListener('change', (e) => {
            state.enableTimer = e.target.checked;
            updateEstimatedTime();
        });

        ['module1', 'module2', 'module3', 'module4'].forEach(id => {
            document.getElementById(id).addEventListener('change', () => {
                updateSelectedModules();
            });
        });

        document.querySelectorAll('input[name="answerMode"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                state.answerMode = e.target.value;
            });
        });

        // Setup Functions
        function updateEstimatedTime() {
            const minutes = Math.ceil(state.questionCount * 1.33);
            document.getElementById('estimatedTime').textContent = minutes;
            state.timeRemaining = minutes * 60;
        }

        function updateSelectedModules() {
            state.selectedModules = [];
            let count = 0;
            ['module1', 'module2', 'module3', 'module4'].forEach((id, index) => {
                if (document.getElementById(id).checked) {
                    state.selectedModules.push(index + 1);
                    count++;
                }
            });

            const warning = document.getElementById('minModulesWarning');
            if (count === 0) {
                warning.classList.add('show');
                document.getElementById('startExamBtn').disabled = true;
            } else {
                warning.classList.remove('show');
                document.getElementById('startExamBtn').disabled = false;
            }
        }

        function getCorrectAnswerIndexes(question) {
            if (Array.isArray(question.answers) && question.answers.length > 0) {
                return [...new Set(question.answers.map(v => Number(v)).filter(Number.isInteger))].sort((a, b) => a - b);
            }
            if (Number.isInteger(question.answer)) {
                return [question.answer];
            }
            if (typeof question.correct_answer === 'string') {
                const indices = [...question.correct_answer.toUpperCase().matchAll(/[A-Z]/g)]
                    .map(match => match[0].charCodeAt(0) - 65)
                    .filter(i => i >= 0);
                if (indices.length > 0) {
                    return [...new Set(indices)].sort((a, b) => a - b);
                }
            }
            return [0];
        }

        function isMultiSelectQuestion(question) {
            return getCorrectAnswerIndexes(question).length > 1;
        }

        function normalizeUserAnswer(answerValue) {
            if (Array.isArray(answerValue)) {
                return [...new Set(answerValue.map(v => Number(v)).filter(Number.isInteger))].sort((a, b) => a - b);
            }
            if (Number.isInteger(answerValue)) {
                return [answerValue];
            }
            return [];
        }

        function normalizeOptionKey(optionText) {
            return decodeEscapedText(String(optionText ?? ''))
                .replace(/[`"'‚Äú‚Äù‚Äô]/g, '')
                .replace(/\s+/g, ' ')
                .trim()
                .toLowerCase();
        }

        function generateFallbackOption(module, usedKeys) {
            const fallbackByModule = {
                1: [
                    'This statement causes a syntax error.',
                    'The value remains unchanged after execution.',
                    'The result depends on Python version details.',
                    'The output is converted to a string automatically.'
                ],
                2: [
                    'The loop condition never becomes True.',
                    'The else block runs only after break.',
                    'This raises a runtime error immediately.',
                    'Operator precedence makes this always False.'
                ],
                3: [
                    'This operation creates a deep copy.',
                    'The lookup raises KeyError by default.',
                    'The collection becomes immutable.',
                    'The collection remains unchanged.'
                ],
                4: [
                    'A TypeError is raised before execution.',
                    'The function implicitly returns None.',
                    'The exception is ignored automatically.',
                    'finally never runs after return.'
                ]
            };

            const pool = fallbackByModule[module] || fallbackByModule[1];
            for (const candidate of pool) {
                const key = normalizeOptionKey(candidate);
                if (!usedKeys.has(key)) {
                    return candidate;
                }
            }
            let variant = 1;
            while (true) {
                const candidate = `Alternative distractor ${variant}`;
                const key = normalizeOptionKey(candidate);
                if (!usedKeys.has(key)) {
                    return candidate;
                }
                variant += 1;
            }
        }

        function ensureDistinctOptions(preparedQuestion, correctIndexes) {
            if (!Array.isArray(preparedQuestion.options) || preparedQuestion.options.length === 0) {
                return correctIndexes;
            }

            const correctSet = new Set(correctIndexes);
            const groups = new Map();

            preparedQuestion.options.forEach((option, index) => {
                const key = normalizeOptionKey(option);
                if (!groups.has(key)) {
                    groups.set(key, []);
                }
                groups.get(key).push(index);
            });

            groups.forEach((indexes) => {
                if (indexes.length < 2) {
                    return;
                }

                let keepIndex = indexes[0];
                for (const idx of indexes) {
                    if (correctSet.has(idx)) {
                        keepIndex = idx;
                        break;
                    }
                }

                indexes.forEach((idx) => {
                    if (idx === keepIndex) {
                        return;
                    }

                    const usedKeys = new Set(preparedQuestion.options.map(option => normalizeOptionKey(option)));
                    const replacement = generateFallbackOption(preparedQuestion.module, usedKeys);
                    preparedQuestion.options[idx] = replacement;

                    if (correctSet.has(idx)) {
                        correctSet.delete(idx);
                    }
                });
            });

            const validCorrect = [...correctSet]
                .filter(index => Number.isInteger(index) && index >= 0 && index < preparedQuestion.options.length)
                .sort((a, b) => a - b);

            if (validCorrect.length > 0) {
                return validCorrect;
            }
            return [0];
        }

        function formatAnswersText(indices, question) {
            if (!Array.isArray(indices) || indices.length === 0) {
                return '';
            }
            return indices
                .map(index => `${String.fromCharCode(65 + index)}. ${decodeEscapedText(question.options[index] ?? '')}`)
                .join(' | ');
        }

        function isAnswerCorrect(question, answerValue) {
            const correct = getCorrectAnswerIndexes(question);
            const selected = normalizeUserAnswer(answerValue);
            if (correct.length !== selected.length) {
                return false;
            }
            return correct.every((value, index) => value === selected[index]);
        }

        function prepareQuestionForSession(question, module) {
            const prepared = {
                ...question,
                module,
                options: Array.isArray(question.options) ? [...question.options] : []
            };
            let correctIndexes = getCorrectAnswerIndexes(question);
            correctIndexes = ensureDistinctOptions(prepared, correctIndexes);
            const shuffledOptions = shuffleArray(
                prepared.options.map((option, index) => ({ option, index }))
            );
            prepared.options = shuffledOptions.map(entry => entry.option);
            const remappedCorrect = shuffledOptions
                .map((entry, newIndex) => (correctIndexes.includes(entry.index) ? newIndex : null))
                .filter(Number.isInteger)
                .sort((a, b) => a - b);
            prepared.answers = remappedCorrect;
            prepared.answer = remappedCorrect[0] ?? 0;
            prepared.correct_answer = remappedCorrect.map(index => String.fromCharCode(65 + index)).join(', ');
            return prepared;
        }

        function updateQuestionControlButtons(total, current) {
            const isLastQuestion = current === total;
            const prevBtn = document.getElementById('prevBtn');
            const skipBtn = document.getElementById('skipBtn');
            const submitBtn = document.getElementById('submitBtn');
            const nextBtn = document.getElementById('nextBtn');
            const finishBtn = document.getElementById('finishBtn');
            const selectedAnswers = normalizeUserAnswer(state.answers[state.currentQuestionIndex]);

            prevBtn.disabled = state.currentQuestionIndex === 0;

            if (state.answerMode === 'immediate') {
                if (state.showFeedback) {
                    submitBtn.style.display = 'none';
                    skipBtn.style.display = 'none';
                    nextBtn.style.display = isLastQuestion ? 'none' : 'inline-flex';
                    finishBtn.style.display = isLastQuestion ? 'inline-flex' : 'none';
                } else {
                    submitBtn.style.display = 'inline-flex';
                    submitBtn.disabled = selectedAnswers.length === 0;
                    skipBtn.style.display = isLastQuestion ? 'none' : 'inline-flex';
                    nextBtn.style.display = 'none';
                    finishBtn.style.display = 'none';
                }
                return;
            }

            submitBtn.style.display = 'none';
            skipBtn.style.display = isLastQuestion ? 'none' : 'inline-flex';
            nextBtn.style.display = isLastQuestion ? 'none' : 'inline-flex';
            finishBtn.style.display = isLastQuestion ? 'inline-flex' : 'none';
        }

        async function startExam() {
            // Load questions from JSON file
            try {
                // Load questions from embedded QUESTIONS_BANK (no fetch needed)
                const data = QUESTIONS_BANK;
                
                // Filter questions by selected modules
                let filteredQuestions = [];
                for (const module of state.selectedModules) {
                    const moduleKey = 'module' + module;
                    if (data[moduleKey]) {
                        const questionsWithModule = data[moduleKey].map(question => ({
                            ...question,
                            module
                        }));
                        filteredQuestions = filteredQuestions.concat(questionsWithModule);
                    }
                }

                // Shuffle, select, and randomize option order per question
                filteredQuestions = shuffleArray(filteredQuestions)
                    .slice(0, state.questionCount)
                    .map(question => prepareQuestionForSession(question, question.module));
                state.questions = filteredQuestions;

                // Initialize state
                state.currentQuestionIndex = 0;
                state.answers = {};
                state.skipped = new Set();
                state.showFeedback = false;
                state.startTime = Date.now();
                state.hintsUsed = new Set();  // Reset hints for new exam
                state.hintsEnabled = document.getElementById('hintsEnabled').checked;  // Capture hints setting

                // Update UI
                showScreen('examScreen');
                buildNavigator();
                displayQuestion();

                // Start timer if enabled
                if (state.enableTimer) {
                    startTimer();
                }

                // Warn on page unload
                window.addEventListener('beforeunload', (e) => {
                    e.preventDefault();
                    e.returnValue = '';
                });
            } catch (error) {
                console.error('Error loading questions:', error);
                alert('Failed to load exam questions. Please check the questions-bank-1000.json file.');
            }
        }

        // Exam Functions
        function displayQuestion() {
            const question = state.questions[state.currentQuestionIndex];
            const isMultiSelect = isMultiSelectQuestion(question);
            const correctIndexes = getCorrectAnswerIndexes(question);
            const selectedAnswers = normalizeUserAnswer(state.answers[state.currentQuestionIndex]);
            
            // Update progress
            const total = state.questions.length;
            const current = state.currentQuestionIndex + 1;
            document.getElementById('progressText').textContent = `Question ${current} of ${total}`;
            document.getElementById('questionNum').textContent = `Question ${current} of ${total}`;
            
            // Display question
            document.getElementById('questionText').textContent = decodeEscapedText(question.prompt);

            // Display code if exists
            const codeBlock = document.getElementById('codeBlock');
            if (question.code) {
                document.getElementById('codeContent').textContent = formatCodeForDisplay(question.code);
                codeBlock.style.display = 'block';
            } else {
                codeBlock.style.display = 'none';
            }

            // Display options
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                
                const isSelected = selectedAnswers.includes(index);
                if (isSelected) optionDiv.classList.add('selected');
                
                // Check if feedback should be shown
                if (state.showFeedback) {
                    if (isSelected) {
                        optionDiv.classList.add(correctIndexes.includes(index) ? 'correct' : 'incorrect');
                    }
                    if (correctIndexes.includes(index)) {
                        optionDiv.classList.add('correct');
                    }
                }

                const optionId = `option${state.currentQuestionIndex}_${index}`;
                const inputType = isMultiSelect ? 'checkbox' : 'radio';
                optionDiv.innerHTML = `
                    <input type="${inputType}" id="${optionId}" name="option-${state.currentQuestionIndex}" value="${index}" ${isSelected ? 'checked' : ''}>
                    <label class="option-label" for="${optionId}"></label>
                `;
                optionDiv.querySelector('.option-label').textContent = `${String.fromCharCode(65 + index)}. ${decodeEscapedText(option)}`;

                const inputElement = optionDiv.querySelector('input');
                inputElement.addEventListener('click', event => event.stopPropagation());
                inputElement.addEventListener('change', () => selectOption(index));
                optionDiv.addEventListener('click', event => {
                    if (event.target.tagName === 'LABEL') {
                        return;
                    }
                    selectOption(index);
                });
                optionsContainer.appendChild(optionDiv);
            });

            // Display feedback if in immediate mode and feedback is active
            if (state.answerMode === 'immediate' && state.showFeedback) {
                showFeedback();
            }

            // Clear previous feedback if not immediate mode
            if (state.answerMode === 'end' || !state.showFeedback) {
                document.getElementById('feedbackContainer').innerHTML = '';
                document.getElementById('feedbackContainer').classList.remove('show', 'feedback-correct', 'feedback-incorrect');
            }

            // Update navigation/action buttons
            updateQuestionControlButtons(total, current);

            // Update navigator
            updateNavigator();
            
            // Update hint display
            updateHintDisplay();

            // Keyboard shortcuts
            document.addEventListener('keydown', handleKeyboard);
        }

        function selectOption(index) {
            const question = state.questions[state.currentQuestionIndex];
            const isMultiSelect = isMultiSelectQuestion(question);

            // Don't allow changing answer if feedback is already shown
            if (state.showFeedback && state.answerMode === 'immediate') {
                return;
            }

            if (isMultiSelect) {
                let selected = normalizeUserAnswer(state.answers[state.currentQuestionIndex]);
                if (selected.includes(index)) {
                    selected = selected.filter(value => value !== index);
                } else {
                    selected.push(index);
                    selected = [...new Set(selected)].sort((a, b) => a - b);
                }
                if (selected.length > 0) {
                    state.answers[state.currentQuestionIndex] = selected;
                } else {
                    delete state.answers[state.currentQuestionIndex];
                }
            } else {
                state.answers[state.currentQuestionIndex] = index;
            }
            state.skipped.delete(state.currentQuestionIndex);

            // Just update selected styles; in immediate mode feedback appears only after submit.
            const selected = normalizeUserAnswer(state.answers[state.currentQuestionIndex]);
            document.querySelectorAll('.option').forEach((opt, optionIndex) => {
                opt.classList.remove('selected');
                if (selected.includes(optionIndex)) {
                    opt.classList.add('selected');
                }
            });

            if (state.answerMode === 'immediate') {
                const feedbackContainer = document.getElementById('feedbackContainer');
                if (!state.showFeedback) {
                    feedbackContainer.innerHTML = '';
                    feedbackContainer.classList.remove('show', 'feedback-correct', 'feedback-incorrect');
                }
            }

            updateQuestionControlButtons(state.questions.length, state.currentQuestionIndex + 1);
            updateNavigator();
        }

        function submitAnswer() {
            if (state.answerMode !== 'immediate' || state.showFeedback) {
                return;
            }

            const selectedIndexes = normalizeUserAnswer(state.answers[state.currentQuestionIndex]);
            const feedbackContainer = document.getElementById('feedbackContainer');

            if (selectedIndexes.length === 0) {
                feedbackContainer.classList.remove('feedback-correct');
                feedbackContainer.classList.add('show', 'feedback-incorrect');
                feedbackContainer.innerHTML = `
                    <div class="feedback-title">Select an answer first</div>
                    <div class="hint-section">
                        Choose at least one option, then click <strong>Submit Answer</strong>.
                    </div>
                `;
                updateQuestionControlButtons(state.questions.length, state.currentQuestionIndex + 1);
                return;
            }

            showFeedback();
        }

        function showFeedback() {
            if (state.answerMode !== 'immediate') {
                return;
            }

            state.showFeedback = true;
            const question = state.questions[state.currentQuestionIndex];
            const selectedIndexes = normalizeUserAnswer(state.answers[state.currentQuestionIndex]);
            const correctIndexes = getCorrectAnswerIndexes(question);
            const isCorrect = isAnswerCorrect(question, selectedIndexes);
            const correctAnswerText = escapeHtml(formatAnswersText(correctIndexes, question));
            const userAnswerText = escapeHtml(formatAnswersText(selectedIndexes, question));
            const hintText = question.hint ? escapeHtml(decodeEscapedText(question.hint)) : '';
            const explanationText = question.explanation ? escapeHtml(decodeEscapedText(question.explanation)) : '';
            const hasHint = hintText.trim().length > 0;
            const hasExplanation = explanationText.trim().length > 0;

            // Update option styling
            document.querySelectorAll('.option').forEach((opt, index) => {
                opt.classList.remove('correct', 'incorrect', 'selected');
                const isSelected = selectedIndexes.includes(index);
                const isCorrectOption = correctIndexes.includes(index);

                // Mark the selected option
                if (isSelected) {
                    opt.classList.add('selected');
                    opt.classList.add(isCorrectOption ? 'correct' : 'incorrect');
                }

                // Always show the correct answer in green
                if (isCorrectOption) {
                    opt.classList.add('correct');
                }
            });

            // Show feedback
            const feedbackContainer = document.getElementById('feedbackContainer');
            feedbackContainer.classList.remove('feedback-correct', 'feedback-incorrect');
            feedbackContainer.classList.add('show', isCorrect ? 'feedback-correct' : 'feedback-incorrect');
            feedbackContainer.innerHTML = `
                <div class="feedback-title">
                    ${isCorrect ? '‚úì Correct!' : '‚úó Incorrect'}
                </div>
                ${selectedIndexes.length > 0 ? `
                    <div class="hint-section">
                        <strong>Your Answer:</strong> ${userAnswerText}
                    </div>
                ` : ''}
                ${!isCorrect ? `
                    <div class="hint-section">
                        <strong>Correct Answer:</strong> ${correctAnswerText}
                    </div>
                ` : ''}
                ${hasHint ? `
                    <div class="hint-section">
                        <strong>Hint:</strong> ${hintText}
                    </div>
                ` : ''}
                ${hasExplanation ? `
                    <div class="explanation-section">
                        <strong>Explanation:</strong> ${explanationText}
                    </div>
                ` : ''}
                ${!isCorrect && !hasHint && !hasExplanation ? `
                    <div class="explanation-section">
                        <strong>Why:</strong> Trace the code line by line and compare each operation with the highlighted correct option.
                    </div>
                ` : ''}
            `;

            // Lock options after submission in immediate mode
            document.querySelectorAll('.option input').forEach(input => {
                input.disabled = true;
            });

            // Update buttons
            updateQuestionControlButtons(state.questions.length, state.currentQuestionIndex + 1);
        }

        function nextQuestion() {
            if (state.currentQuestionIndex < state.questions.length - 1) {
                state.currentQuestionIndex++;
                state.showFeedback = false;
                displayQuestion();
            }
        }

        function previousQuestion() {
            if (state.currentQuestionIndex > 0) {
                state.currentQuestionIndex--;
                state.showFeedback = false;
                displayQuestion();
            }
        }

        function skipQuestion() {
            state.skipped.add(state.currentQuestionIndex);
            nextQuestion();
        }

        function buildNavigator() {
            const grid = document.getElementById('navigatorGrid');
            grid.innerHTML = '';

            for (let i = 0; i < state.questions.length; i++) {
                const item = document.createElement('div');
                item.className = 'navigator-item';
                item.textContent = i + 1;

                if (i === state.currentQuestionIndex) {
                    item.classList.add('current');
                } else if (i in state.answers) {
                    item.classList.add('answered');
                } else if (state.skipped.has(i)) {
                    item.classList.add('skipped');
                }

                item.addEventListener('click', () => {
                    state.currentQuestionIndex = i;
                    state.showFeedback = false;
                    displayQuestion();
                });

                grid.appendChild(item);
            }
        }

        function updateNavigator() {
            document.querySelectorAll('.navigator-item').forEach((item, index) => {
                item.classList.remove('current', 'answered', 'skipped');

                if (index === state.currentQuestionIndex) {
                    item.classList.add('current');
                } else if (index in state.answers) {
                    item.classList.add('answered');
                } else if (state.skipped.has(index)) {
                    item.classList.add('skipped');
                }
            });
        }

        function startTimer() {
            const display = document.getElementById('timerDisplay');
            const timer = document.getElementById('examTimer');

            state.timerInterval = setInterval(() => {
                state.timeRemaining--;

                const minutes = Math.floor(state.timeRemaining / 60);
                const seconds = state.timeRemaining % 60;
                display.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

                // Update styling based on time remaining
                const percentage = (state.timeRemaining / (state.questionCount * 1.33 * 60)) * 100;
                timer.classList.remove('warning', 'critical');

                if (percentage <= 10) {
                    timer.classList.add('critical');
                } else if (percentage <= 25) {
                    timer.classList.add('warning');
                }

                if (state.timeRemaining <= 0) {
                    clearInterval(state.timerInterval);
                    finishExam();
                }
            }, 1000);
        }

        function handleKeyboard(e) {
            if (e.key === 'Enter') {
                if (state.answerMode === 'immediate' && !state.showFeedback) {
                    submitAnswer();
                    return;
                }
                if (state.currentQuestionIndex < state.questions.length - 1) {
                    nextQuestion();
                } else {
                    confirmFinishExam();
                }
            } else if (e.key === 'Escape') {
                confirmBackToSetup();
            }
        }

        // Results Functions
        function calculateResults() {
            let correct = 0;
            state.questions.forEach((question, index) => {
                if (isAnswerCorrect(question, state.answers[index])) {
                    correct++;
                }
            });

            const total = state.questions.length;
            const percentage = Math.round((correct / total) * 100);
            const timeTaken = Math.round((Date.now() - state.startTime) / 1000 / 60);

            // Calculate module breakdown
            const moduleScores = {};
            state.selectedModules.forEach(module => {
                moduleScores[module] = { correct: 0, total: 0 };
            });
            state.questions.forEach((question, index) => {
                const module = question.module;
                if (!moduleScores[module]) {
                    return;
                }
                moduleScores[module].total += 1;
                if (isAnswerCorrect(question, state.answers[index])) {
                    moduleScores[module].correct += 1;
                }
            });

            return { correct, total, percentage, timeTaken, moduleScores };
        }

        function finishExam() {
            clearInterval(state.timerInterval);
            window.removeEventListener('beforeunload', () => {});

            const results = calculateResults();

            // Update Results Screen
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.classList.remove('pass', 'fail');
            scoreCircle.classList.add(results.percentage >= 70 ? 'pass' : 'fail');
            
            document.getElementById('scorePercentage').textContent = `${results.percentage}%`;
            document.getElementById('totalScoreDisplay').textContent = `${results.correct}/${results.total}`;
            document.getElementById('correctAnswersDisplay').textContent = results.correct;
            
            // Display hints used
            if (state.hintsEnabled) {
                document.getElementById('hintsUsedCount').textContent = state.hintsUsed.size;
            } else {
                document.getElementById('hintsUsedCount').textContent = 'N/A';
            }
            
            const statusEl = document.getElementById('scoreStatus');
            if (results.percentage >= 70) {
                statusEl.textContent = '‚úì PASSED';
                statusEl.classList.add('pass');
                statusEl.classList.remove('fail');
            } else {
                statusEl.textContent = '‚úó FAILED';
                statusEl.classList.add('fail');
                statusEl.classList.remove('pass');
            }

            // Time display
            if (state.enableTimer) {
                document.getElementById('timeTakenDisplay').textContent = `${results.timeTaken} min`;
            } else {
                document.getElementById('timeTakenDisplay').textContent = 'N/A';
            }

            // Module breakdown
            if (state.selectedModules.length > 1) {
                const modulesBreakdown = document.getElementById('modulesBreakdown');
                modulesBreakdown.style.display = 'block';
                const container = document.getElementById('moduleScoresContainer');
                container.innerHTML = '';

                state.selectedModules.forEach(module => {
                    const score = results.moduleScores[module];
                    const percent = score.total > 0 ? Math.round((score.correct / score.total) * 100) : 0;
                    const moduleNames = {
                        1: 'Module 1: Fundamentals',
                        2: 'Module 2: Control Flow',
                        3: 'Module 3: Data Collections',
                        4: 'Module 4: Functions & Exceptions'
                    };

                    const div = document.createElement('div');
                    div.className = `module-score module${module}`;
                    div.innerHTML = `
                        <div class="module-score-name">${moduleNames[module]}</div>
                        <div class="module-score-bar">
                            <div class="module-score-fill" style="width: ${percent}%"></div>
                        </div>
                        <div class="module-score-value">${score.correct}/${score.total} (${percent}%)</div>
                    `;
                    container.appendChild(div);
                });
            }

            // Detailed review
            const reviewContainer = document.getElementById('detailedReviewContainer');
            reviewContainer.innerHTML = '';

            state.questions.forEach((question, index) => {
                const userAnswer = state.answers[index];
                const selectedAnswers = normalizeUserAnswer(userAnswer);
                const correctAnswers = getCorrectAnswerIndexes(question);
                const isCorrect = isAnswerCorrect(question, userAnswer);
                const questionText = escapeHtml(decodeEscapedText(question.prompt));
                const codeText = question.code ? escapeHtml(formatCodeForDisplay(question.code)) : '';
                const userAnswerText = escapeHtml(formatAnswersText(selectedAnswers, question));
                const correctAnswerText = escapeHtml(formatAnswersText(correctAnswers, question));
                const hintText = question.hint ? escapeHtml(decodeEscapedText(question.hint)) : '';
                const explanationText = question.explanation ? escapeHtml(decodeEscapedText(question.explanation)) : '';

                const div = document.createElement('div');
                div.className = `review-item ${isCorrect ? 'correct' : 'incorrect'}`;

                div.innerHTML = `
                    <div class="review-item-header">
                        <div class="review-item-number">Question ${index + 1}</div>
                        <div class="review-item-status ${isCorrect ? 'correct' : 'incorrect'}">
                            ${isCorrect ? '‚úì Correct' : '‚úó Incorrect'}
                        </div>
                    </div>
                    <div class="review-item-question">${questionText}</div>
                    ${question.code ? `<div class="review-item-code"><code>${codeText}</code></div>` : ''}
                    <div class="review-answers">
                        ${selectedAnswers.length > 0 ? `
                            <div class="answer-result your-answer">
                                <label>Your Answer</label>
                                <div class="answer-result-text">${userAnswerText}</div>
                            </div>
                        ` : '<div class="answer-result your-answer"><label>Not Answered</label></div>'}
                        ${!isCorrect ? `
                            <div class="answer-result correct-answer">
                                <label>Correct Answer</label>
                                <div class="answer-result-text">${correctAnswerText}</div>
                            </div>
                        ` : ''}
                    </div>
                    ${question.hint ? `<div class="review-hint"><strong>Hint:</strong> ${hintText}</div>` : ''}
                    ${question.explanation ? `<div class="review-explanation"><strong>Explanation:</strong> ${explanationText}</div>` : ''}
                `;

                reviewContainer.appendChild(div);
            });

            showScreen('resultsScreen');
        }

        function resetToSetup() {
            state.currentQuestionIndex = 0;
            state.answers = {};
            state.skipped = new Set();
            state.showFeedback = false;
            showScreen('setupScreen');
        }

        // Modal Functions
        function confirmBackToSetup() {
            document.getElementById('backToSetupModal').classList.add('active');
        }

        function backToSetup() {
            closeModal('backToSetupModal');
            resetToSetup();
        }

        function confirmFinishExam() {
            const allAnswered = Object.keys(state.answers).length === state.questions.length;
            const modalText = document.getElementById('finishExamModalText');
            
            if (!allAnswered) {
                const unanswered = state.questions.length - Object.keys(state.answers).length;
                modalText.textContent = `You have ${unanswered} unanswered question(s). Are you sure you want to finish?`;
            } else {
                modalText.textContent = 'Are you sure you want to finish the exam?';
            }

            document.getElementById('finishExamModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Utility Functions
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        function shuffleArray(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function escapeHtml(text) {
            const safeText = String(text ?? '');
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return safeText.replace(/[&<>"']/g, m => map[m]);
        }

        function decodeEscapedText(text) {
            return String(text ?? '')
                .replace(/\\r\\n/g, '\n')
                .replace(/\\n/g, '\n')
                .replace(/\\t/g, '\t');
        }

        function formatCodeForDisplay(code) {
            return decodeEscapedText(code).trimEnd();
        }

        // Initialize
        updateSelectedModules();
        updateEstimatedTime();
    

        // ========== HINT FUNCTIONALITY ==========
        function toggleHint() {
            const currentQuestion = state.questions[state.currentQuestionIndex];
            const hintBox = document.getElementById('hintBox');
            const hintButton = document.getElementById('hintButton');
            const hintText = document.getElementById('hintText');
            
            if (hintBox.style.display === 'none') {
                // Show hint
                hintText.textContent = decodeEscapedText(currentQuestion.hint || 'No hint available');
                hintBox.style.display = 'block';
                hintButton.textContent = 'üí° Hint Shown';
                hintButton.disabled = true;
                state.hintsUsed.add(state.currentQuestionIndex);
            }
        }

        function updateHintDisplay() {
            const currentQuestion = state.questions[state.currentQuestionIndex];
            const hintSection = document.getElementById('hintSection');
            const hintButton = document.getElementById('hintButton');
            const hintBox = document.getElementById('hintBox');
            
            // Get hints enabled setting from checkbox
            const hintsEnabled = document.getElementById('hintsEnabled').checked;
            
            if (hintsEnabled) {
                hintSection.style.display = 'block';
                
                // Reset hint state for new question
                if (state.hintsUsed.has(state.currentQuestionIndex)) {
                    hintButton.textContent = 'üí° Hint Shown';
                    hintButton.disabled = true;
                    hintBox.style.display = 'block';
                    document.getElementById('hintText').textContent = decodeEscapedText(currentQuestion.hint || 'No hint available');
                } else {
                    hintButton.textContent = 'üí° Show Hint';
                    hintButton.disabled = false;
                    hintBox.style.display = 'none';
                }
            } else {
                hintSection.style.display = 'none';
            }
        }
        
        const originalPreviousQuestion = window.previousQuestion;
        window.previousQuestion = function() {
            originalPreviousQuestion.call(this);
            updateHintDisplay();
        };


        // Hook results display to show hints
        const originalDisplayResults = function(screen) {
            const hintsElement = document.getElementById('hintsUsedCount');
            if (hintsElement) {
                if (state.hintsEnabled) {
                    hintsElement.textContent = state.hintsUsed.size;
                } else {
                    hintsElement.textContent = 'N/A';
                }
            }
        };
        
        // Call this hook when transitioning to results
        function displayResultsWithHints() {
            originalDisplayResults(document.getElementById('resultsScreen'));
        }

        </script>
</body>
</html>
